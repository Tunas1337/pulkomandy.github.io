
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>ScreenMode.cpp</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.2.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">/*</a>
<a name="ln2"> * Copyright 2005-2011, Haiku.</a>
<a name="ln3"> * Distributed under the terms of the MIT License.</a>
<a name="ln4"> *</a>
<a name="ln5"> * Authors:</a>
<a name="ln6"> *		Axel DÃ¶rfler, axeld@pinc-software.de</a>
<a name="ln7"> */</a>
<a name="ln8"> </a>
<a name="ln9"> </a>
<a name="ln10">#include &quot;ScreenMode.h&quot;</a>
<a name="ln11"> </a>
<a name="ln12">#include &lt;stdlib.h&gt;</a>
<a name="ln13">#include &lt;stdio.h&gt;</a>
<a name="ln14">#include &lt;string.h&gt;</a>
<a name="ln15"> </a>
<a name="ln16">#include &lt;InterfaceDefs.h&gt;</a>
<a name="ln17">#include &lt;String.h&gt;</a>
<a name="ln18"> </a>
<a name="ln19">#include &lt;compute_display_timing.h&gt;</a>
<a name="ln20"> </a>
<a name="ln21"> </a>
<a name="ln22">/* Note, this headers defines a *private* interface to the Radeon accelerant.</a>
<a name="ln23"> * It's a solution that works with the current BeOS interface that Haiku</a>
<a name="ln24"> * adopted.</a>
<a name="ln25"> * However, it's not a nice and clean solution. Don't use this header in any</a>
<a name="ln26"> * application if you can avoid it. No other driver is using this, or should</a>
<a name="ln27"> * be using this.</a>
<a name="ln28"> * It will be replaced as soon as we introduce an updated accelerant interface</a>
<a name="ln29"> * which may even happen before R1 hits the streets.</a>
<a name="ln30"> */</a>
<a name="ln31"> </a>
<a name="ln32">#include &quot;multimon.h&quot;	// the usual: DANGER WILL, ROBINSON!</a>
<a name="ln33"> </a>
<a name="ln34"> </a>
<a name="ln35">static combine_mode</a>
<a name="ln36">get_combine_mode(display_mode&amp; mode)</a>
<a name="ln37">{</a>
<a name="ln38">	if ((mode.flags &amp; B_SCROLL) == 0)</a>
<a name="ln39">		return kCombineDisable;</a>
<a name="ln40"> </a>
<a name="ln41">	if (mode.virtual_width == mode.timing.h_display * 2)</a>
<a name="ln42">		return kCombineHorizontally;</a>
<a name="ln43"> </a>
<a name="ln44">	if (mode.virtual_height == mode.timing.v_display * 2)</a>
<a name="ln45">		return kCombineVertically;</a>
<a name="ln46"> </a>
<a name="ln47">	return kCombineDisable;</a>
<a name="ln48">}</a>
<a name="ln49"> </a>
<a name="ln50"> </a>
<a name="ln51">static float</a>
<a name="ln52">get_refresh_rate(display_mode&amp; mode)</a>
<a name="ln53">{</a>
<a name="ln54">	// we have to be catious as refresh rate cannot be controlled directly,</a>
<a name="ln55">	// so it suffers under rounding errors and hardware restrictions</a>
<a name="ln56">	return rint(10 * float(mode.timing.pixel_clock * 1000)</a>
<a name="ln57">		/ float(mode.timing.h_total * mode.timing.v_total)) / 10.0;</a>
<a name="ln58">}</a>
<a name="ln59"> </a>
<a name="ln60"> </a>
<a name="ln61">/*!	Helper to sort modes by resolution */</a>
<a name="ln62">static int</a>
<a name="ln63">compare_mode(const void* _mode1, const void* _mode2)</a>
<a name="ln64">{</a>
<a name="ln65">	display_mode *mode1 = (display_mode *)_mode1;</a>
<a name="ln66">	display_mode *mode2 = (display_mode *)_mode2;</a>
<a name="ln67">	combine_mode combine1, combine2;</a>
<a name="ln68">	uint16 width1, width2, height1, height2;</a>
<a name="ln69"> </a>
<a name="ln70">	combine1 = get_combine_mode(*mode1);</a>
<a name="ln71">	combine2 = get_combine_mode(*mode2);</a>
<a name="ln72"> </a>
<a name="ln73">	width1 = mode1-&gt;virtual_width;</a>
<a name="ln74">	height1 = mode1-&gt;virtual_height;</a>
<a name="ln75">	width2 = mode2-&gt;virtual_width;</a>
<a name="ln76">	height2 = mode2-&gt;virtual_height;</a>
<a name="ln77"> </a>
<a name="ln78">	if (combine1 == kCombineHorizontally)</a>
<a name="ln79">		width1 /= 2;</a>
<a name="ln80">	if (combine1 == kCombineVertically)</a>
<a name="ln81">		height1 /= 2;</a>
<a name="ln82">	if (combine2 == kCombineHorizontally)</a>
<a name="ln83">		width2 /= 2;</a>
<a name="ln84">	if (combine2 == kCombineVertically)</a>
<a name="ln85">		height2 /= 2;</a>
<a name="ln86"> </a>
<a name="ln87">	if (width1 != width2)</a>
<a name="ln88">		return width1 - width2;</a>
<a name="ln89"> </a>
<a name="ln90">	if (height1 != height2)</a>
<a name="ln91">		return height1 - height2;</a>
<a name="ln92"> </a>
<a name="ln93">	return (int)(10 * get_refresh_rate(*mode1)</a>
<a name="ln94">		-  10 * get_refresh_rate(*mode2));</a>
<a name="ln95">}</a>
<a name="ln96"> </a>
<a name="ln97"> </a>
<a name="ln98">//	#pragma mark -</a>
<a name="ln99"> </a>
<a name="ln100"> </a>
<a name="ln101">int32</a>
<a name="ln102">screen_mode::BitsPerPixel() const</a>
<a name="ln103">{</a>
<a name="ln104">	switch (space) {</a>
<a name="ln105">		case B_RGB32:	return 32;</a>
<a name="ln106">		case B_RGB24:	return 24;</a>
<a name="ln107">		case B_RGB16:	return 16;</a>
<a name="ln108">		case B_RGB15:	return 15;</a>
<a name="ln109">		case B_CMAP8:	return 8;</a>
<a name="ln110">		default:		return 0;</a>
<a name="ln111">	}</a>
<a name="ln112">}</a>
<a name="ln113"> </a>
<a name="ln114"> </a>
<a name="ln115">bool</a>
<a name="ln116">screen_mode::operator==(const screen_mode &amp;other) const</a>
<a name="ln117">{</a>
<a name="ln118">	return !(*this != other);</a>
<a name="ln119">}</a>
<a name="ln120"> </a>
<a name="ln121"> </a>
<a name="ln122">bool</a>
<a name="ln123">screen_mode::operator!=(const screen_mode &amp;other) const</a>
<a name="ln124">{</a>
<a name="ln125">	return width != other.width || height != other.height</a>
<a name="ln126">		|| space != other.space || refresh != other.refresh</a>
<a name="ln127">		|| combine != other.combine</a>
<a name="ln128">		|| swap_displays != other.swap_displays</a>
<a name="ln129">		|| use_laptop_panel != other.use_laptop_panel</a>
<a name="ln130">		|| tv_standard != other.tv_standard;</a>
<a name="ln131">}</a>
<a name="ln132"> </a>
<a name="ln133"> </a>
<a name="ln134">void</a>
<a name="ln135">screen_mode::SetTo(display_mode&amp; mode)</a>
<a name="ln136">{</a>
<a name="ln137">	width = mode.virtual_width;</a>
<a name="ln138">	height = mode.virtual_height;</a>
<a name="ln139">	space = (color_space)mode.space;</a>
<a name="ln140">	combine = get_combine_mode(mode);</a>
<a name="ln141">	refresh = get_refresh_rate(mode);</a>
<a name="ln142"> </a>
<a name="ln143">	if (combine == kCombineHorizontally)</a>
<a name="ln144">		width /= 2;</a>
<a name="ln145">	else if (combine == kCombineVertically)</a>
<a name="ln146">		height /= 2;</a>
<a name="ln147"> </a>
<a name="ln148">	swap_displays = false;</a>
<a name="ln149">	use_laptop_panel = false;</a>
<a name="ln150">	tv_standard = 0;</a>
<a name="ln151">}</a>
<a name="ln152"> </a>
<a name="ln153"> </a>
<a name="ln154">//	#pragma mark -</a>
<a name="ln155"> </a>
<a name="ln156"> </a>
<a name="ln157">ScreenMode::ScreenMode(BWindow* window)</a>
<a name="ln158">	:</a>
<a name="ln159">	fWindow(window),</a>
<a name="ln160">	fUpdatedModes(false)</a>
<a name="ln161">{</a>
<a name="ln162">	BScreen screen(window);</a>
<a name="ln163">	if (screen.GetModeList(&amp;fModeList, &amp;fModeCount) == B_OK) {</a>
<a name="ln164">		// sort modes by resolution and refresh to make</a>
<a name="ln165">		// the resolution and refresh menu look nicer</a>
<a name="ln166">		qsort(fModeList, fModeCount, sizeof(display_mode), compare_mode);</a>
<a name="ln167">	} else {</a>
<a name="ln168">		fModeList = NULL;</a>
<a name="ln169">		fModeCount = 0;</a>
<a name="ln170">	}</a>
<a name="ln171">}</a>
<a name="ln172"> </a>
<a name="ln173"> </a>
<a name="ln174">ScreenMode::~ScreenMode()</a>
<a name="ln175">{</a>
<a name="ln176">	free(fModeList);</a>
<a name="ln177">}</a>
<a name="ln178"> </a>
<a name="ln179"> </a>
<a name="ln180">status_t</a>
<a name="ln181">ScreenMode::Set(const screen_mode&amp; mode, int32 workspace)</a>
<a name="ln182">{</a>
<a name="ln183">	if (!fUpdatedModes)</a>
<a name="ln184">		UpdateOriginalModes();</a>
<a name="ln185"> </a>
<a name="ln186">	BScreen screen(fWindow);</a>
<a name="ln187"> </a>
<a name="ln188">	if (workspace == ~0)</a>
<a name="ln189">		workspace = current_workspace();</a>
<a name="ln190"> </a>
<a name="ln191">	// TODO: our app_server doesn't fully support workspaces, yet</a>
<a name="ln192">	SetSwapDisplays(&amp;screen, mode.swap_displays);</a>
<a name="ln193">	SetUseLaptopPanel(&amp;screen, mode.use_laptop_panel);</a>
<a name="ln194">	SetTVStandard(&amp;screen, mode.tv_standard);</a>
<a name="ln195"> </a>
<a name="ln196">	display_mode displayMode;</a>
<a name="ln197">	if (!_GetDisplayMode(mode, displayMode))</a>
<a name="ln198">		return B_ENTRY_NOT_FOUND;</a>
<a name="ln199"> </a>
<a name="ln200">	return screen.SetMode(workspace, &amp;displayMode, true);</a>
<a name="ln201">}</a>
<a name="ln202"> </a>
<a name="ln203"> </a>
<a name="ln204">status_t</a>
<a name="ln205">ScreenMode::Get(screen_mode&amp; mode, int32 workspace) const</a>
<a name="ln206">{</a>
<a name="ln207">	display_mode displayMode;</a>
<a name="ln208">	BScreen screen(fWindow);</a>
<a name="ln209"> </a>
<a name="ln210">	if (workspace == ~0)</a>
<a name="ln211">		workspace = current_workspace();</a>
<a name="ln212"> </a>
<a name="ln213">	if (screen.GetMode(workspace, &amp;displayMode) != B_OK)</a>
<a name="ln214">		return B_ERROR;</a>
<a name="ln215"> </a>
<a name="ln216">	mode.SetTo(displayMode);</a>
<a name="ln217"> </a>
<a name="ln218">	// TODO: our app_server doesn't fully support workspaces, yet</a>
<a name="ln219">	if (GetSwapDisplays(&amp;screen, &amp;mode.swap_displays) != B_OK)</a>
<a name="ln220">		mode.swap_displays = false;</a>
<a name="ln221">	if (GetUseLaptopPanel(&amp;screen, &amp;mode.use_laptop_panel) != B_OK)</a>
<a name="ln222">		mode.use_laptop_panel = false;</a>
<a name="ln223">	if (GetTVStandard(&amp;screen, &amp;mode.tv_standard) != B_OK)</a>
<a name="ln224">		mode.tv_standard = 0;</a>
<a name="ln225"> </a>
<a name="ln226">	return B_OK;</a>
<a name="ln227">}</a>
<a name="ln228"> </a>
<a name="ln229"> </a>
<a name="ln230">status_t</a>
<a name="ln231">ScreenMode::GetOriginalMode(screen_mode&amp; mode, int32 workspace) const</a>
<a name="ln232">{</a>
<a name="ln233">	if (workspace == ~0)</a>
<a name="ln234">		workspace = current_workspace();</a>
<a name="ln235">		// TODO this should use kMaxWorkspaces</a>
<a name="ln236">	else if (workspace &gt; 31)</a>
<a name="ln237">		return B_BAD_INDEX;</a>
<a name="ln238"> </a>
<a name="ln239">	mode = fOriginal[workspace];</a>
<a name="ln240"> </a>
<a name="ln241">	return B_OK;</a>
<a name="ln242">}</a>
<a name="ln243"> </a>
<a name="ln244"> </a>
<a name="ln245">status_t</a>
<a name="ln246">ScreenMode::Set(const display_mode&amp; mode, int32 workspace)</a>
<a name="ln247">{</a>
<a name="ln248">	if (!fUpdatedModes)</a>
<a name="ln249">		UpdateOriginalModes();</a>
<a name="ln250"> </a>
<a name="ln251">	BScreen screen(fWindow);</a>
<a name="ln252"> </a>
<a name="ln253">	if (workspace == ~0)</a>
<a name="ln254">		workspace = current_workspace();</a>
<a name="ln255"> </a>
<a name="ln256">	// BScreen::SetMode() needs a non-const display_mode</a>
<a name="ln257">	display_mode nonConstMode;</a>
<a name="ln258">	memcpy(&amp;nonConstMode, &amp;mode, sizeof(display_mode));</a>
<a name="ln259">	return screen.SetMode(workspace, &amp;nonConstMode, true);</a>
<a name="ln260">}</a>
<a name="ln261"> </a>
<a name="ln262"> </a>
<a name="ln263">status_t</a>
<a name="ln264">ScreenMode::Get(display_mode&amp; mode, int32 workspace) const</a>
<a name="ln265">{</a>
<a name="ln266">	BScreen screen(fWindow);</a>
<a name="ln267"> </a>
<a name="ln268">	if (workspace == ~0)</a>
<a name="ln269">		workspace = current_workspace();</a>
<a name="ln270"> </a>
<a name="ln271">	return screen.GetMode(workspace, &amp;mode);</a>
<a name="ln272">}</a>
<a name="ln273"> </a>
<a name="ln274"> </a>
<a name="ln275">/*!	This method assumes that you already reverted to the correct number</a>
<a name="ln276">	of workspaces.</a>
<a name="ln277">*/</a>
<a name="ln278">status_t</a>
<a name="ln279">ScreenMode::Revert()</a>
<a name="ln280">{</a>
<a name="ln281">	if (!fUpdatedModes)</a>
<a name="ln282">		return B_ERROR;</a>
<a name="ln283"> </a>
<a name="ln284">	status_t result = B_OK;</a>
<a name="ln285">	screen_mode current;</a>
<a name="ln286">	for (int32 workspace = 0; workspace &lt; count_workspaces(); workspace++) {</a>
<a name="ln287">		if (Get(current, workspace) == B_OK &amp;&amp; fOriginal[workspace] == current)</a>
<a name="ln288">			continue;</a>
<a name="ln289"> </a>
<a name="ln290">		BScreen screen(fWindow);</a>
<a name="ln291"> </a>
<a name="ln292">		// TODO: our app_server doesn't fully support workspaces, yet</a>
<a name="ln293">		if (workspace == current_workspace()) {</a>
<a name="ln294">			SetSwapDisplays(&amp;screen, fOriginal[workspace].swap_displays);</a>
<a name="ln295">			SetUseLaptopPanel(&amp;screen, fOriginal[workspace].use_laptop_panel);</a>
<a name="ln296">			SetTVStandard(&amp;screen, fOriginal[workspace].tv_standard);</a>
<a name="ln297">		}</a>
<a name="ln298"> </a>
<a name="ln299">		result = screen.SetMode(workspace, &amp;fOriginalDisplayMode[workspace],</a>
<a name="ln300">			true);</a>
<a name="ln301">		if (result != B_OK)</a>
<a name="ln302">			break;</a>
<a name="ln303">	}</a>
<a name="ln304"> </a>
<a name="ln305">	return result;</a>
<a name="ln306">}</a>
<a name="ln307"> </a>
<a name="ln308"> </a>
<a name="ln309">void</a>
<a name="ln310">ScreenMode::UpdateOriginalModes()</a>
<a name="ln311">{</a>
<a name="ln312">	BScreen screen(fWindow);</a>
<a name="ln313">	for (int32 workspace = 0; workspace &lt; count_workspaces(); workspace++) {</a>
<a name="ln314">		if (screen.GetMode(workspace, &amp;fOriginalDisplayMode[workspace])</a>
<a name="ln315">				== B_OK) {</a>
<a name="ln316">			Get(fOriginal[workspace], workspace);</a>
<a name="ln317">			fUpdatedModes = true;</a>
<a name="ln318">		}</a>
<a name="ln319">	}</a>
<a name="ln320">}</a>
<a name="ln321"> </a>
<a name="ln322"> </a>
<a name="ln323">bool</a>
<a name="ln324">ScreenMode::SupportsColorSpace(const screen_mode&amp; mode, color_space space)</a>
<a name="ln325">{</a>
<a name="ln326">	return true;</a>
<a name="ln327">}</a>
<a name="ln328"> </a>
<a name="ln329"> </a>
<a name="ln330">status_t</a>
<a name="ln331">ScreenMode::GetRefreshLimits(const screen_mode&amp; mode, float&amp; min, float&amp; max)</a>
<a name="ln332">{</a>
<a name="ln333">	uint32 minClock, maxClock;</a>
<a name="ln334">	display_mode displayMode;</a>
<a name="ln335">	if (!_GetDisplayMode(mode, displayMode))</a>
<a name="ln336">		return B_ERROR;</a>
<a name="ln337"> </a>
<a name="ln338">	BScreen screen(fWindow);</a>
<a name="ln339">	if (screen.GetPixelClockLimits(&amp;displayMode, &amp;minClock, &amp;maxClock) &lt; B_OK)</a>
<a name="ln340">		return B_ERROR;</a>
<a name="ln341"> </a>
<a name="ln342">	uint32 total = displayMode.timing.h_total * displayMode.timing.v_total;</a>
<a name="ln343">	min = minClock * 1000.0 / total;</a>
<a name="ln344">	max = maxClock * 1000.0 / total;</a>
<a name="ln345"> </a>
<a name="ln346">	return B_OK;</a>
<a name="ln347">}</a>
<a name="ln348"> </a>
<a name="ln349"> </a>
<a name="ln350">status_t</a>
<a name="ln351">ScreenMode::GetMonitorInfo(monitor_info&amp; info, float* _diagonalInches)</a>
<a name="ln352">{</a>
<a name="ln353">	BScreen screen(fWindow);</a>
<a name="ln354">	status_t status = screen.GetMonitorInfo(&amp;info);</a>
<a name="ln355">	if (status != B_OK)</a>
<a name="ln356">		return status;</a>
<a name="ln357"> </a>
<a name="ln358">	if (_diagonalInches != NULL) {</a>
<a name="ln359">		*_diagonalInches = round(sqrt(info.width * info.width</a>
<a name="ln360">			+ info.height * info.height) / 0.254) / 10.0;</a>
<a name="ln361">	}</a>
<a name="ln362"> </a>
<a name="ln363">	// Some older CRT monitors do not contain the monitor range information</a>
<a name="ln364">	// (EDID1_MONITOR_RANGES) in their EDID info resulting in the min/max</a>
<a name="ln365">	// horizontal/vertical frequencies being zero.  In this case, set the</a>
<a name="ln366">	// vertical frequency range to 60..85 Hz.</a>
<a name="ln367">	if (info.min_vertical_frequency == 0) {</a>
<a name="ln368">		info.min_vertical_frequency = 60;</a>
<a name="ln369">		info.max_vertical_frequency = 85;</a>
<a name="ln370">	}</a>
<a name="ln371"> </a>
<a name="ln372">	// TODO: If the names aren't sound, we could see if we find/create a</a>
<a name="ln373">	// database for the entries with user presentable names; they are fine</a>
<a name="ln374">	// for the models I could test with so far.</a>
<a name="ln375"> </a>
<a name="ln376">	uint32 id = (info.vendor[0] &lt;&lt; 24) | (info.vendor[1] &lt;&lt; 16)</a>
<a name="ln377">		| (info.vendor[2] &lt;&lt; 8) | (info.vendor[3]);</a>
<a name="ln378"> </a>
<a name="ln379">	switch (id) {</a>
<a name="ln380">		case 'ADI\0':</a>
<a name="ln381">			strcpy(info.vendor, &quot;ADI MicroScan&quot;);</a>
<a name="ln382">			break;</a>
<a name="ln383">		case 'AAC\0':</a>
<a name="ln384">		case 'ACR\0':</a>
<a name="ln385">		case 'API\0':</a>
<a name="ln386">			strcpy(info.vendor, &quot;Acer&quot;);</a>
<a name="ln387">			break;</a>
<a name="ln388">		case 'ACT\0':</a>
<a name="ln389">			strcpy(info.vendor, &quot;Targa&quot;);</a>
<a name="ln390">			break;</a>
<a name="ln391">		case 'APP\0':</a>
<a name="ln392">			strcpy(info.vendor, &quot;Apple&quot;);</a>
<a name="ln393">			break;</a>
<a name="ln394">		case 'AUO\0':</a>
<a name="ln395">			strcpy(info.vendor, &quot;AU Optronics&quot;);</a>
<a name="ln396">			break;</a>
<a name="ln397">		case 'BNQ\0':</a>
<a name="ln398">			strcpy(info.vendor, &quot;BenQ&quot;);</a>
<a name="ln399">			break;</a>
<a name="ln400">		case 'CPL\0':</a>
<a name="ln401">			strcpy(info.vendor, &quot;ALFA&quot;);</a>
<a name="ln402">			break;</a>
<a name="ln403">		case 'CPQ\0':</a>
<a name="ln404">			strcpy(info.vendor, &quot;Compaq&quot;);</a>
<a name="ln405">			break;</a>
<a name="ln406">		case 'DEL\0':</a>
<a name="ln407">			strcpy(info.vendor, &quot;Dell&quot;);</a>
<a name="ln408">			break;</a>
<a name="ln409">		case 'DPC\0':</a>
<a name="ln410">			strcpy(info.vendor, &quot;Delta Electronics&quot;);</a>
<a name="ln411">			break;</a>
<a name="ln412">		case 'DWE\0':</a>
<a name="ln413">			strcpy(info.vendor, &quot;Daewoo&quot;);</a>
<a name="ln414">			break;</a>
<a name="ln415">		case 'ECS\0':</a>
<a name="ln416">			strcpy(info.vendor, &quot;Elitegroup&quot;);</a>
<a name="ln417">			break;</a>
<a name="ln418">		case 'ELS\0':</a>
<a name="ln419">			strcpy(info.vendor, &quot;ELSA&quot;);</a>
<a name="ln420">			break;</a>
<a name="ln421">		case 'EMA\0':</a>
<a name="ln422">			strcpy(info.vendor, &quot;eMachines&quot;);</a>
<a name="ln423">			break;</a>
<a name="ln424">		case 'EIZ\0':</a>
<a name="ln425">		case 'ENC\0':</a>
<a name="ln426">			strcpy(info.vendor, &quot;Eizo&quot;);</a>
<a name="ln427">			break;</a>
<a name="ln428">		case 'EPI\0':</a>
<a name="ln429">			strcpy(info.vendor, &quot;Envision&quot;);</a>
<a name="ln430">			break;</a>
<a name="ln431">		case 'FCM\0':</a>
<a name="ln432">			strcpy(info.vendor, &quot;Funai Electronics&quot;);</a>
<a name="ln433">			break;</a>
<a name="ln434">		case 'FUS\0':</a>
<a name="ln435">			strcpy(info.vendor, &quot;Fujitsu-Siemens&quot;);</a>
<a name="ln436">			break;</a>
<a name="ln437">		case 'GSM\0':</a>
<a name="ln438">			strcpy(info.vendor, &quot;LG&quot;);</a>
<a name="ln439">			break;</a>
<a name="ln440">		case 'GWY\0':</a>
<a name="ln441">			strcpy(info.vendor, &quot;Gateway&quot;);</a>
<a name="ln442">			break;</a>
<a name="ln443">		case 'HIQ\0':</a>
<a name="ln444">		case 'HEI\0':</a>
<a name="ln445">			strcpy(info.vendor, &quot;Hyundai&quot;);</a>
<a name="ln446">			break;</a>
<a name="ln447">		case 'HIT\0':</a>
<a name="ln448">		case 'HTC\0':</a>
<a name="ln449">			strcpy(info.vendor, &quot;Hitachi&quot;);</a>
<a name="ln450">			break;</a>
<a name="ln451">		case 'HSL\0':</a>
<a name="ln452">			strcpy(info.vendor, &quot;Hansol&quot;);</a>
<a name="ln453">			break;</a>
<a name="ln454">		case 'HWP\0':</a>
<a name="ln455">			strcpy(info.vendor, &quot;Hewlett Packard&quot;);</a>
<a name="ln456">			break;</a>
<a name="ln457">		case 'ICL\0':</a>
<a name="ln458">			strcpy(info.vendor, &quot;Fujitsu&quot;);</a>
<a name="ln459">			break;</a>
<a name="ln460">		case 'IVM\0':</a>
<a name="ln461">			strcpy(info.vendor, &quot;Iiyama&quot;);</a>
<a name="ln462">			break;</a>
<a name="ln463">		case 'LEN\0':</a>
<a name="ln464">			strcpy(info.vendor, &quot;Lenovo&quot;);</a>
<a name="ln465">			break;</a>
<a name="ln466">		case 'LPL\0':</a>
<a name="ln467">			strcpy(info.vendor, &quot;LG Phillips&quot;);</a>
<a name="ln468">			break;</a>
<a name="ln469">		case 'LTN\0':</a>
<a name="ln470">			strcpy(info.vendor, &quot;Lite-On&quot;);</a>
<a name="ln471">			break;</a>
<a name="ln472">		case 'MAX\0':</a>
<a name="ln473">			strcpy(info.vendor, &quot;Maxdata&quot;);</a>
<a name="ln474">			break;</a>
<a name="ln475">		case 'MED\0':</a>
<a name="ln476">			strcpy(info.vendor, &quot;Medion&quot;);</a>
<a name="ln477">			break;</a>
<a name="ln478">		case 'MEI\0':</a>
<a name="ln479">			strcpy(info.vendor, &quot;Panasonic&quot;);</a>
<a name="ln480">			break;</a>
<a name="ln481">		case 'MEL\0':</a>
<a name="ln482">			strcpy(info.vendor, &quot;Mitsubishi&quot;);</a>
<a name="ln483">			break;</a>
<a name="ln484">		case 'MIR\0':</a>
<a name="ln485">			strcpy(info.vendor, &quot;miro&quot;);</a>
<a name="ln486">			break;</a>
<a name="ln487">		case 'MTC\0':</a>
<a name="ln488">			strcpy(info.vendor, &quot;Mitac&quot;);</a>
<a name="ln489">			break;</a>
<a name="ln490">		case 'NAN\0':</a>
<a name="ln491">			strcpy(info.vendor, &quot;Nanao&quot;);</a>
<a name="ln492">			break;</a>
<a name="ln493">		case 'NOK\0':</a>
<a name="ln494">			strcpy(info.vendor, &quot;Nokia&quot;);</a>
<a name="ln495">			break;</a>
<a name="ln496">		case 'OQI\0':</a>
<a name="ln497">			strcpy(info.vendor, &quot;Optiquest&quot;);</a>
<a name="ln498">			break;</a>
<a name="ln499">		case 'PHL\0':</a>
<a name="ln500">			strcpy(info.vendor, &quot;Philips&quot;);</a>
<a name="ln501">			break;</a>
<a name="ln502">		case 'PTS\0':</a>
<a name="ln503">			strcpy(info.vendor, &quot;Proview&quot;);</a>
<a name="ln504">			break;</a>
<a name="ln505">		case 'QDS\0':</a>
<a name="ln506">			strcpy(info.vendor, &quot;Quanta Display&quot;);</a>
<a name="ln507">			break;</a>
<a name="ln508">		case 'REL\0':</a>
<a name="ln509">			strcpy(info.vendor, &quot;Relisys&quot;);</a>
<a name="ln510">			break;</a>
<a name="ln511">		case 'SAM\0':</a>
<a name="ln512">			strcpy(info.vendor, &quot;Samsung&quot;);</a>
<a name="ln513">			break;</a>
<a name="ln514">		case 'SDI\0':</a>
<a name="ln515">			strcpy(info.vendor, &quot;Samtron&quot;);</a>
<a name="ln516">			break;</a>
<a name="ln517">		case 'SHP\0':</a>
<a name="ln518">			strcpy(info.vendor, &quot;Sharp&quot;);</a>
<a name="ln519">			break;</a>
<a name="ln520">		case 'SNI\0':</a>
<a name="ln521">			strcpy(info.vendor, &quot;Siemens&quot;);</a>
<a name="ln522">			break;</a>
<a name="ln523">		case 'SNY\0':</a>
<a name="ln524">			strcpy(info.vendor, &quot;Sony&quot;);</a>
<a name="ln525">			break;</a>
<a name="ln526">		case 'SPT\0':</a>
<a name="ln527">			strcpy(info.vendor, &quot;Sceptre&quot;);</a>
<a name="ln528">			break;</a>
<a name="ln529">		case 'SRC\0':</a>
<a name="ln530">			strcpy(info.vendor, &quot;Shamrock&quot;);</a>
<a name="ln531">			break;</a>
<a name="ln532">		case 'SUN\0':</a>
<a name="ln533">			strcpy(info.vendor, &quot;Sun Microsystems&quot;);</a>
<a name="ln534">			break;</a>
<a name="ln535">		case 'TAT\0':</a>
<a name="ln536">			strcpy(info.vendor, &quot;Tatung&quot;);</a>
<a name="ln537">			break;</a>
<a name="ln538">		case 'TOS\0':</a>
<a name="ln539">		case 'TSB\0':</a>
<a name="ln540">			strcpy(info.vendor, &quot;Toshiba&quot;);</a>
<a name="ln541">			break;</a>
<a name="ln542">		case 'UNM\0':</a>
<a name="ln543">			strcpy(info.vendor, &quot;Unisys&quot;);</a>
<a name="ln544">			break;</a>
<a name="ln545">		case 'VIZ\0':</a>
<a name="ln546">			strcpy(info.vendor, &quot;Vizio&quot;);</a>
<a name="ln547">			break;</a>
<a name="ln548">		case 'VSC\0':</a>
<a name="ln549">			strcpy(info.vendor, &quot;ViewSonic&quot;);</a>
<a name="ln550">			break;</a>
<a name="ln551">		case 'ZCM\0':</a>
<a name="ln552">			strcpy(info.vendor, &quot;Zenith&quot;);</a>
<a name="ln553">			break;</a>
<a name="ln554">	}</a>
<a name="ln555"> </a>
<a name="ln556">	// Remove extraneous vendor strings and whitespace</a>
<a name="ln557"> </a>
<a name="ln558">	BString name(info.name);</a>
<a name="ln559">	name.IReplaceAll(info.vendor, &quot;&quot;);</a>
<a name="ln560">	name.Trim();</a>
<a name="ln561"> </a>
<a name="ln562">	strcpy(info.name, name.String());</a>
<a name="ln563"> </a>
<a name="ln564">	return B_OK;</a>
<a name="ln565">}</a>
<a name="ln566"> </a>
<a name="ln567"> </a>
<a name="ln568">status_t</a>
<a name="ln569">ScreenMode::GetDeviceInfo(accelerant_device_info&amp; info)</a>
<a name="ln570">{</a>
<a name="ln571">	BScreen screen(fWindow);</a>
<a name="ln572">	return screen.GetDeviceInfo(&amp;info);</a>
<a name="ln573">}</a>
<a name="ln574"> </a>
<a name="ln575"> </a>
<a name="ln576">screen_mode</a>
<a name="ln577">ScreenMode::ModeAt(int32 index)</a>
<a name="ln578">{</a>
<a name="ln579">	if (index &lt; 0)</a>
<a name="ln580">		index = 0;</a>
<a name="ln581">	else if (index &gt;= (int32)fModeCount)</a>
<a name="ln582">		index = fModeCount - 1;</a>
<a name="ln583"> </a>
<a name="ln584">	screen_mode mode;</a>
<a name="ln585">	mode.SetTo(fModeList[index]);</a>
<a name="ln586"> </a>
<a name="ln587">	return mode;</a>
<a name="ln588">}</a>
<a name="ln589"> </a>
<a name="ln590"> </a>
<a name="ln591">const display_mode&amp;</a>
<a name="ln592">ScreenMode::DisplayModeAt(int32 index)</a>
<a name="ln593">{</a>
<a name="ln594">	if (index &lt; 0)</a>
<a name="ln595">		index = 0;</a>
<a name="ln596">	else if (index &gt;= (int32)fModeCount)</a>
<a name="ln597">		index = fModeCount - 1;</a>
<a name="ln598"> </a>
<a name="ln599">	return fModeList[index];</a>
<a name="ln600">}</a>
<a name="ln601"> </a>
<a name="ln602"> </a>
<a name="ln603">int32</a>
<a name="ln604">ScreenMode::CountModes()</a>
<a name="ln605">{</a>
<a name="ln606">	return fModeCount;</a>
<a name="ln607">}</a>
<a name="ln608"> </a>
<a name="ln609"> </a>
<a name="ln610">/*!	Searches for a similar mode in the reported mode list, and if that does not</a>
<a name="ln611">	find a matching mode, it will compute the mode manually using the GTF.</a>
<a name="ln612">*/</a>
<a name="ln613">bool</a>
<a name="ln614">ScreenMode::_GetDisplayMode(const screen_mode&amp; mode, display_mode&amp; displayMode)</a>
<a name="ln615">{</a>
<a name="ln616">	uint16 virtualWidth, virtualHeight;</a>
<a name="ln617">	int32 bestIndex = -1;</a>
<a name="ln618">	float bestDiff = 999;</a>
<a name="ln619"> </a>
<a name="ln620">	virtualWidth = mode.combine == kCombineHorizontally</a>
<a name="ln621">		? mode.width * 2 : mode.width;</a>
<a name="ln622">	virtualHeight = mode.combine == kCombineVertically</a>
<a name="ln623">		? mode.height * 2 : mode.height;</a>
<a name="ln624"> </a>
<a name="ln625">	// try to find mode in list provided by driver</a>
<a name="ln626">	for (uint32 i = 0; i &lt; fModeCount; i++) {</a>
<a name="ln627">		if (fModeList[i].virtual_width != virtualWidth</a>
<a name="ln628">			|| fModeList[i].virtual_height != virtualHeight</a>
<a name="ln629">			|| (color_space)fModeList[i].space != mode.space)</a>
<a name="ln630">			continue;</a>
<a name="ln631"> </a>
<a name="ln632">		// Accept the mode if the computed refresh rate of the mode is within</a>
<a name="ln633">		// 0.6 percent of the refresh rate specified by the caller.  Note that</a>
<a name="ln634">		// refresh rates computed from mode parameters is not exact; especially</a>
<a name="ln635">		// some of the older modes such as 640x480, 800x600, and 1024x768.</a>
<a name="ln636">		// The tolerance of 0.6% was obtained by examining the various possible</a>
<a name="ln637">		// modes.</a>
<a name="ln638"> </a>
<a name="ln639">		float refreshDiff = fabs(get_refresh_rate(fModeList[i]) - mode.refresh);</a>
<a name="ln640">		if (refreshDiff &lt; 0.006 * mode.refresh) {</a>
<a name="ln641">			// Accept this mode.</a>
<a name="ln642">			displayMode = fModeList[i];</a>
<a name="ln643">			displayMode.h_display_start = 0;</a>
<a name="ln644">			displayMode.v_display_start = 0;</a>
<a name="ln645"> </a>
<a name="ln646">			// Since the computed refresh rate of the selected mode might differ</a>
<a name="ln647">			// from selected refresh rate by a few tenths (e.g. 60.2 instead of</a>
<a name="ln648">			// 60.0), tweak the pixel clock so the the refresh rate of the mode</a>
<a name="ln649">			// matches the selected refresh rate.</a>
<a name="ln650"> </a>
<a name="ln651">			displayMode.timing.pixel_clock = uint32(((displayMode.timing.h_total</a>
<a name="ln652">				* displayMode.timing.v_total * mode.refresh) / 1000.0) + 0.5);</a>
<a name="ln653">			return true;</a>
<a name="ln654">		}</a>
<a name="ln655"> </a>
<a name="ln656">		// Mode not acceptable.</a>
<a name="ln657"> </a>
<a name="ln658">		if (refreshDiff &lt; bestDiff) {</a>
<a name="ln659">			bestDiff = refreshDiff;</a>
<a name="ln660">			bestIndex = i;</a>
<a name="ln661">		}</a>
<a name="ln662">	}</a>
<a name="ln663"> </a>
<a name="ln664">	// we didn't find the exact mode, but something very similar?</a>
<a name="ln665">	if (bestIndex == -1)</a>
<a name="ln666">		return false;</a>
<a name="ln667"> </a>
<a name="ln668">	displayMode = fModeList[bestIndex];</a>
<a name="ln669">	displayMode.h_display_start = 0;</a>
<a name="ln670">	displayMode.v_display_start = 0;</a>
<a name="ln671"> </a>
<a name="ln672">	// For the mode selected by the width, height, and refresh rate, compute</a>
<a name="ln673">	// the video timing parameters for the mode by using the VESA Generalized</a>
<a name="ln674">	// Timing Formula (GTF).</a>
<a name="ln675">	compute_display_timing(mode.width, mode.height, mode.refresh, false,</a>
<a name="ln676">		&amp;displayMode.timing);</a>
<a name="ln677"> </a>
<a name="ln678">	return true;</a>
<a name="ln679">}</a>

</code></pre>
<div class="balloon" rel="505"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''QDS\0''.</p></div>
<div class="balloon" rel="548"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''VSC\0''.</p></div>
<div class="balloon" rel="551"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''ZCM\0''.</p></div>
<div class="balloon" rel="545"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''VIZ\0''.</p></div>
<div class="balloon" rel="542"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''UNM\0''.</p></div>
<div class="balloon" rel="539"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''TSB\0''.</p></div>
<div class="balloon" rel="538"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''TOS\0''.</p></div>
<div class="balloon" rel="508"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''REL\0''.</p></div>
<div class="balloon" rel="444"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''HEI\0''.</p></div>
<div class="balloon" rel="447"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''HIT\0''.</p></div>
<div class="balloon" rel="448"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''HTC\0''.</p></div>
<div class="balloon" rel="451"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''HSL\0''.</p></div>
<div class="balloon" rel="454"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''HWP\0''.</p></div>
<div class="balloon" rel="457"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''ICL\0''.</p></div>
<div class="balloon" rel="520"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''SNI\0''.</p></div>
<div class="balloon" rel="517"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''SHP\0''.</p></div>
<div class="balloon" rel="514"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''SDI\0''.</p></div>
<div class="balloon" rel="511"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''SAM\0''.</p></div>
<div class="balloon" rel="460"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''IVM\0''.</p></div>
<div class="balloon" rel="443"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''HIQ\0''.</p></div>
<div class="balloon" rel="463"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''LEN\0''.</p></div>
<div class="balloon" rel="469"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''LTN\0''.</p></div>
<div class="balloon" rel="472"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''MAX\0''.</p></div>
<div class="balloon" rel="475"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''MED\0''.</p></div>
<div class="balloon" rel="478"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''MEI\0''.</p></div>
<div class="balloon" rel="481"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''MEL\0''.</p></div>
<div class="balloon" rel="484"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''MIR\0''.</p></div>
<div class="balloon" rel="487"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''MTC\0''.</p></div>
<div class="balloon" rel="490"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''NAN\0''.</p></div>
<div class="balloon" rel="493"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''NOK\0''.</p></div>
<div class="balloon" rel="496"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''OQI\0''.</p></div>
<div class="balloon" rel="499"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''PHL\0''.</p></div>
<div class="balloon" rel="502"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''PTS\0''.</p></div>
<div class="balloon" rel="466"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''LPL\0''.</p></div>
<div class="balloon" rel="440"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''GWY\0''.</p></div>
<div class="balloon" rel="384"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''ACR\0''.</p></div>
<div class="balloon" rel="434"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''FUS\0''.</p></div>
<div class="balloon" rel="535"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''TAT\0''.</p></div>
<div class="balloon" rel="532"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''SUN\0''.</p></div>
<div class="balloon" rel="529"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''SRC\0''.</p></div>
<div class="balloon" rel="526"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''SPT\0''.</p></div>
<div class="balloon" rel="380"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''ADI\0''.</p></div>
<div class="balloon" rel="383"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''AAC\0''.</p></div>
<div class="balloon" rel="523"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''SNY\0''.</p></div>
<div class="balloon" rel="385"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''API\0''.</p></div>
<div class="balloon" rel="388"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''ACT\0''.</p></div>
<div class="balloon" rel="391"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''APP\0''.</p></div>
<div class="balloon" rel="394"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''AUO\0''.</p></div>
<div class="balloon" rel="397"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''BNQ\0''.</p></div>
<div class="balloon" rel="437"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''GSM\0''.</p></div>
<div class="balloon" rel="403"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''CPQ\0''.</p></div>
<div class="balloon" rel="406"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''DEL\0''.</p></div>
<div class="balloon" rel="400"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''CPL\0''.</p></div>
<div class="balloon" rel="412"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''DWE\0''.</p></div>
<div class="balloon" rel="415"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''ECS\0''.</p></div>
<div class="balloon" rel="418"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''ELS\0''.</p></div>
<div class="balloon" rel="421"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''EMA\0''.</p></div>
<div class="balloon" rel="424"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''EIZ\0''.</p></div>
<div class="balloon" rel="409"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''DPC\0''.</p></div>
<div class="balloon" rel="425"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''ENC\0''.</p></div>
<div class="balloon" rel="428"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''EPI\0''.</p></div>
<div class="balloon" rel="431"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1039/" target="_blank">V1039</a> Character escape is used in multicharacter literal. This causes implementation-defined behavior. Inspect expression: ''FCM\0''.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
