
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>m_apm_lc.h</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.2.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1"> </a>
<a name="ln2">/* </a>
<a name="ln3"> *  M_APM  -  m_apm_lc.h</a>
<a name="ln4"> *</a>
<a name="ln5"> *  Copyright (C) 1999 - 2007   Michael C. Ring</a>
<a name="ln6"> *</a>
<a name="ln7"> *  Permission to use, copy, and distribute this software and its</a>
<a name="ln8"> *  documentation for any purpose with or without fee is hereby granted,</a>
<a name="ln9"> *  provided that the above copyright notice appear in all copies and</a>
<a name="ln10"> *  that both that copyright notice and this permission notice appear</a>
<a name="ln11"> *  in supporting documentation.</a>
<a name="ln12"> *</a>
<a name="ln13"> *  Permission to modify the software is granted. Permission to distribute</a>
<a name="ln14"> *  the modified code is granted. Modifications are to be distributed by</a>
<a name="ln15"> *  using the file 'license.txt' as a template to modify the file header.</a>
<a name="ln16"> *  'license.txt' is available in the official MAPM distribution.</a>
<a name="ln17"> *</a>
<a name="ln18"> *  This software is provided &quot;as is&quot; without express or implied warranty.</a>
<a name="ln19"> */</a>
<a name="ln20"> </a>
<a name="ln21">/*</a>
<a name="ln22"> *      This is the local header file needed to build the library</a>
<a name="ln23"> *</a>
<a name="ln24"> *      $Log: m_apm_lc.h,v $</a>
<a name="ln25"> *      Revision 1.45  2007/12/04 01:26:02  mike</a>
<a name="ln26"> *      add support for Digital Mars compiler</a>
<a name="ln27"> *</a>
<a name="ln28"> *      Revision 1.44  2007/12/03 01:23:54  mike</a>
<a name="ln29"> *      Update license</a>
<a name="ln30"> *</a>
<a name="ln31"> *      Revision 1.43  2004/05/28 19:30:16  mike</a>
<a name="ln32"> *      add new prototype</a>
<a name="ln33"> *</a>
<a name="ln34"> *      Revision 1.42  2003/10/25 22:36:01  mike</a>
<a name="ln35"> *      add support for National Instruments CVI</a>
<a name="ln36"> *</a>
<a name="ln37"> *      Revision 1.41  2003/07/21 19:42:50  mike</a>
<a name="ln38"> *      rename M_APM_EXIT to M_APM_FATAL</a>
<a name="ln39"> *      change M_APM_RETURN to 0, set M_APM_FATAL to 1</a>
<a name="ln40"> *</a>
<a name="ln41"> *      Revision 1.40  2003/07/21 19:14:29  mike</a>
<a name="ln42"> *      add new prototype</a>
<a name="ln43"> *</a>
<a name="ln44"> *      Revision 1.39  2003/05/04 20:09:10  mike</a>
<a name="ln45"> *      add support for Open Watcom 1.0</a>
<a name="ln46"> *</a>
<a name="ln47"> *      Revision 1.38  2003/05/01 21:54:04  mike</a>
<a name="ln48"> *      add math.h, add new prototype</a>
<a name="ln49"> *</a>
<a name="ln50"> *      Revision 1.37  2003/04/01 23:19:01  mike</a>
<a name="ln51"> *      add new log constants and prototypes</a>
<a name="ln52"> *</a>
<a name="ln53"> *      Revision 1.36  2003/03/30 23:02:49  mike</a>
<a name="ln54"> *      add new log constants and new prototypes</a>
<a name="ln55"> *</a>
<a name="ln56"> *      Revision 1.35  2002/11/03 23:21:28  mike</a>
<a name="ln57"> *      add new prototype, M_set_to_zero</a>
<a name="ln58"> *</a>
<a name="ln59"> *      Revision 1.34  2002/05/18 15:38:52  mike</a>
<a name="ln60"> *      add MINGW compiler #define</a>
<a name="ln61"> *</a>
<a name="ln62"> *      Revision 1.33  2002/02/14 19:42:59  mike</a>
<a name="ln63"> *      add conditional compiler stuff for Metrowerks Codewarrior compiler</a>
<a name="ln64"> *</a>
<a name="ln65"> *      Revision 1.32  2001/08/25 16:45:40  mike</a>
<a name="ln66"> *      add new prototype</a>
<a name="ln67"> *</a>
<a name="ln68"> *      Revision 1.31  2001/07/24 18:13:31  mike</a>
<a name="ln69"> *      add new prototype</a>
<a name="ln70"> *</a>
<a name="ln71"> *      Revision 1.30  2001/07/16 18:38:04  mike</a>
<a name="ln72"> *      add 'free_all' prototypes</a>
<a name="ln73"> *</a>
<a name="ln74"> *      Revision 1.29  2001/02/07 19:13:27  mike</a>
<a name="ln75"> *      eliminate MM_skip_limit_PI_check</a>
<a name="ln76"> *</a>
<a name="ln77"> *      Revision 1.28  2001/01/23 21:10:24  mike</a>
<a name="ln78"> *      add new prototype for M_long_2_ascii</a>
<a name="ln79"> *</a>
<a name="ln80"> *      Revision 1.27  2000/12/10 14:30:52  mike</a>
<a name="ln81"> *      added ifdef for LCC-WIN32 compiler</a>
<a name="ln82"> *</a>
<a name="ln83"> *      Revision 1.26  2000/12/02 19:41:45  mike</a>
<a name="ln84"> *      add arc functions near 0</a>
<a name="ln85"> *</a>
<a name="ln86"> *      Revision 1.25  2000/11/14 22:48:29  mike</a>
<a name="ln87"> *      add BORLANDC to pre-processor stuff</a>
<a name="ln88"> *</a>
<a name="ln89"> *      Revision 1.24  2000/10/22 21:17:56  mike</a>
<a name="ln90"> *      add _MSC_VER check for VC++ compilers</a>
<a name="ln91"> *</a>
<a name="ln92"> *      Revision 1.23  2000/10/18 23:09:27  mike</a>
<a name="ln93"> *      add new prototype</a>
<a name="ln94"> *</a>
<a name="ln95"> *      Revision 1.22  2000/09/23 18:55:30  mike</a>
<a name="ln96"> *      add new prototype fpr M_apm_sdivide</a>
<a name="ln97"> *</a>
<a name="ln98"> *      Revision 1.21  2000/08/01 22:21:55  mike</a>
<a name="ln99"> *      add prototype</a>
<a name="ln100"> *</a>
<a name="ln101"> *      Revision 1.20  2000/07/19 17:21:26  mike</a>
<a name="ln102"> *      add ifdef for older Borland compilers</a>
<a name="ln103"> *</a>
<a name="ln104"> *      Revision 1.19  2000/07/11 20:09:30  mike</a>
<a name="ln105"> *      add new prototype</a>
<a name="ln106"> *</a>
<a name="ln107"> *      Revision 1.18  2000/05/19 17:09:57  mike</a>
<a name="ln108"> *      add local copies for PI variables</a>
<a name="ln109"> *</a>
<a name="ln110"> *      Revision 1.17  2000/05/04 23:21:56  mike</a>
<a name="ln111"> *      change/add new global internal MAPM values</a>
<a name="ln112"> *</a>
<a name="ln113"> *      Revision 1.16  2000/04/11 18:44:43  mike</a>
<a name="ln114"> *      no longer need the constant 'Fifteen'</a>
<a name="ln115"> *</a>
<a name="ln116"> *      Revision 1.15  2000/04/03 17:27:08  mike</a>
<a name="ln117"> *      added cbrt prototype</a>
<a name="ln118"> *</a>
<a name="ln119"> *      Revision 1.14  2000/02/03 22:41:34  mike</a>
<a name="ln120"> *      add MAPM_* memory function defines</a>
<a name="ln121"> *</a>
<a name="ln122"> *      Revision 1.13  1999/07/09 22:46:10  mike</a>
<a name="ln123"> *      add skip limit integer</a>
<a name="ln124"> *</a>
<a name="ln125"> *      Revision 1.12  1999/07/08 23:35:20  mike</a>
<a name="ln126"> *      change constant</a>
<a name="ln127"> *</a>
<a name="ln128"> *      Revision 1.11  1999/07/08 22:55:38  mike</a>
<a name="ln129"> *      add new constant</a>
<a name="ln130"> *</a>
<a name="ln131"> *      Revision 1.10  1999/06/23 01:08:11  mike</a>
<a name="ln132"> *      added constant '15'</a>
<a name="ln133"> *</a>
<a name="ln134"> *      Revision 1.9  1999/06/20 23:38:11  mike</a>
<a name="ln135"> *      updated for new prototypes</a>
<a name="ln136"> *</a>
<a name="ln137"> *      Revision 1.8  1999/06/20 23:30:03  mike</a>
<a name="ln138"> *      added new constants</a>
<a name="ln139"> *</a>
<a name="ln140"> *      Revision 1.7  1999/06/20 19:23:12  mike</a>
<a name="ln141"> *      delete constants no longer needed</a>
<a name="ln142"> *</a>
<a name="ln143"> *      Revision 1.6  1999/06/20 18:50:21  mike</a>
<a name="ln144"> *      added more constants</a>
<a name="ln145"> *</a>
<a name="ln146"> *      Revision 1.5  1999/06/19 20:37:30  mike</a>
<a name="ln147"> *      add stack prototypes</a>
<a name="ln148"> *</a>
<a name="ln149"> *      Revision 1.4  1999/05/31 23:01:38  mike</a>
<a name="ln150"> *      delete some unneeded constants</a>
<a name="ln151"> *</a>
<a name="ln152"> *      Revision 1.3  1999/05/15 02:23:28  mike</a>
<a name="ln153"> *      fix define for M_COS</a>
<a name="ln154"> *</a>
<a name="ln155"> *      Revision 1.2  1999/05/15 02:16:56  mike</a>
<a name="ln156"> *      add check for number of decimal places</a>
<a name="ln157"> *</a>
<a name="ln158"> *      Revision 1.1  1999/05/12 20:51:22  mike</a>
<a name="ln159"> *      Initial revision</a>
<a name="ln160"> *</a>
<a name="ln161"> *      $Id: m_apm_lc.h,v 1.45 2007/12/04 01:26:02 mike Exp $</a>
<a name="ln162"> */</a>
<a name="ln163"> </a>
<a name="ln164">#ifndef M__APM_LOCAL_INC</a>
<a name="ln165">#define M__APM_LOCAL_INC</a>
<a name="ln166"> </a>
<a name="ln167">#include &lt;stdio.h&gt;</a>
<a name="ln168">#include &lt;stdlib.h&gt;</a>
<a name="ln169">#include &lt;string.h&gt;</a>
<a name="ln170">#include &lt;math.h&gt;</a>
<a name="ln171">#include &quot;m_apm.h&quot;</a>
<a name="ln172"> </a>
<a name="ln173">/* </a>
<a name="ln174"> *   this supports older (and maybe newer?) Borland compilers.</a>
<a name="ln175"> *   these Borland compilers define __MSDOS__</a>
<a name="ln176"> */</a>
<a name="ln177"> </a>
<a name="ln178">#ifndef MSDOS</a>
<a name="ln179">#ifdef __MSDOS__</a>
<a name="ln180">#define MSDOS</a>
<a name="ln181">#endif</a>
<a name="ln182">#endif</a>
<a name="ln183"> </a>
<a name="ln184">/* </a>
<a name="ln185"> *   this supports some newer Borland compilers (i.e., v5.5).</a>
<a name="ln186"> */</a>
<a name="ln187"> </a>
<a name="ln188">#ifndef MSDOS</a>
<a name="ln189">#ifdef __BORLANDC__</a>
<a name="ln190">#define MSDOS</a>
<a name="ln191">#endif</a>
<a name="ln192">#endif</a>
<a name="ln193"> </a>
<a name="ln194">/* </a>
<a name="ln195"> *   this supports the LCC-WIN32 compiler</a>
<a name="ln196"> */</a>
<a name="ln197"> </a>
<a name="ln198">#ifndef MSDOS</a>
<a name="ln199">#ifdef __LCC__</a>
<a name="ln200">#define MSDOS</a>
<a name="ln201">#endif</a>
<a name="ln202">#endif</a>
<a name="ln203"> </a>
<a name="ln204">/* </a>
<a name="ln205"> *   this supports Micro$oft Visual C++ and also possibly older</a>
<a name="ln206"> *   straight C compilers as well.</a>
<a name="ln207"> */</a>
<a name="ln208"> </a>
<a name="ln209">#ifndef MSDOS</a>
<a name="ln210">#ifdef _MSC_VER</a>
<a name="ln211">#define MSDOS</a>
<a name="ln212">#endif</a>
<a name="ln213">#endif</a>
<a name="ln214"> </a>
<a name="ln215">/* </a>
<a name="ln216"> *   this supports the Metrowerks CodeWarrior 7.0 compiler (I think...)</a>
<a name="ln217"> */</a>
<a name="ln218"> </a>
<a name="ln219">#ifndef MSDOS</a>
<a name="ln220">#ifdef __MWERKS__</a>
<a name="ln221">#define MSDOS</a>
<a name="ln222">#endif</a>
<a name="ln223">#endif</a>
<a name="ln224"> </a>
<a name="ln225">/* </a>
<a name="ln226"> *   this supports the MINGW 32 compiler</a>
<a name="ln227"> */</a>
<a name="ln228"> </a>
<a name="ln229">#ifndef MSDOS</a>
<a name="ln230">#ifdef __MINGW_H</a>
<a name="ln231">#define MSDOS</a>
<a name="ln232">#endif</a>
<a name="ln233">#endif</a>
<a name="ln234"> </a>
<a name="ln235">/* </a>
<a name="ln236"> *   this supports the Open Watcom 1.0 compiler</a>
<a name="ln237"> */</a>
<a name="ln238"> </a>
<a name="ln239">#ifndef MSDOS</a>
<a name="ln240">#ifdef __WATCOMC__</a>
<a name="ln241">#define MSDOS</a>
<a name="ln242">#endif</a>
<a name="ln243">#endif</a>
<a name="ln244"> </a>
<a name="ln245">/* </a>
<a name="ln246"> *   this supports the Digital Mars compiler</a>
<a name="ln247"> */</a>
<a name="ln248"> </a>
<a name="ln249">#ifndef MSDOS</a>
<a name="ln250">#ifdef __DMC__</a>
<a name="ln251">#define MSDOS</a>
<a name="ln252">#endif</a>
<a name="ln253">#endif</a>
<a name="ln254"> </a>
<a name="ln255">/* </a>
<a name="ln256"> *   this supports National Instruments LabWindows CVI</a>
<a name="ln257"> */</a>
<a name="ln258"> </a>
<a name="ln259">#ifndef _HAVE_NI_LABWIN_CVI_</a>
<a name="ln260">#ifdef _CVI_</a>
<a name="ln261">#define _HAVE_NI_LABWIN_CVI_</a>
<a name="ln262">#endif</a>
<a name="ln263">#endif</a>
<a name="ln264"> </a>
<a name="ln265">/*</a>
<a name="ln266"> *  If for some reason (RAM limitations, slow floating point, whatever) </a>
<a name="ln267"> *  you do NOT want to use the FFT multiply algorithm, un-comment the </a>
<a name="ln268"> *  #define below, delete mapm_fft.c and remove mapm_fft from the build.</a>
<a name="ln269"> */</a>
<a name="ln270"> </a>
<a name="ln271">/*  #define NO_FFT_MULTIPLY  */</a>
<a name="ln272"> </a>
<a name="ln273">/*</a>
<a name="ln274"> *      use your own memory management functions if desired.</a>
<a name="ln275"> *      re-define MAPM_* below to point to your functions.</a>
<a name="ln276"> *      an example is shown below.</a>
<a name="ln277"> */</a>
<a name="ln278"> </a>
<a name="ln279">/*</a>
<a name="ln280">extern   void   *memory_allocate(unsigned int);</a>
<a name="ln281">extern   void   *memory_reallocate(void *, unsigned int);</a>
<a name="ln282">extern   void   memory_free(void *);</a>
<a name="ln283"> </a>
<a name="ln284">#define  MAPM_MALLOC memory_allocate</a>
<a name="ln285">#define  MAPM_REALLOC memory_reallocate</a>
<a name="ln286">#define  MAPM_FREE memory_free</a>
<a name="ln287">*/</a>
<a name="ln288"> </a>
<a name="ln289">/* default: use the standard C library memory functions ... */</a>
<a name="ln290"> </a>
<a name="ln291">#define  MAPM_MALLOC malloc</a>
<a name="ln292">#define  MAPM_REALLOC realloc</a>
<a name="ln293">#define  MAPM_FREE free</a>
<a name="ln294"> </a>
<a name="ln295">#ifndef TRUE</a>
<a name="ln296">#define TRUE 1</a>
<a name="ln297">#endif</a>
<a name="ln298"> </a>
<a name="ln299">#ifndef FALSE</a>
<a name="ln300">#define FALSE 0</a>
<a name="ln301">#endif</a>
<a name="ln302"> </a>
<a name="ln303">#define	M_APM_IDENT 0x6BCC9AE5</a>
<a name="ln304">#define	M_APM_RETURN 0</a>
<a name="ln305">#define	M_APM_FATAL 1</a>
<a name="ln306"> </a>
<a name="ln307">/* number of digits in the global constants, PI, E, etc */</a>
<a name="ln308"> </a>
<a name="ln309">#define	VALID_DECIMAL_PLACES 128</a>
<a name="ln310"> </a>
<a name="ln311">extern  int     MM_lc_PI_digits;</a>
<a name="ln312">extern  int     MM_lc_log_digits;</a>
<a name="ln313"> </a>
<a name="ln314">/*</a>
<a name="ln315"> *   constants not in m_apm.h</a>
<a name="ln316"> */</a>
<a name="ln317"> </a>
<a name="ln318">extern	M_APM	MM_0_5;</a>
<a name="ln319">extern	M_APM	MM_0_85;</a>
<a name="ln320">extern	M_APM	MM_5x_125R;</a>
<a name="ln321">extern	M_APM	MM_5x_64R;</a>
<a name="ln322">extern	M_APM	MM_5x_256R;</a>
<a name="ln323">extern	M_APM	MM_5x_Eight;</a>
<a name="ln324">extern	M_APM	MM_5x_Sixteen;</a>
<a name="ln325">extern	M_APM	MM_5x_Twenty;</a>
<a name="ln326">extern	M_APM	MM_lc_PI;</a>
<a name="ln327">extern	M_APM	MM_lc_HALF_PI;</a>
<a name="ln328">extern	M_APM	MM_lc_2_PI;</a>
<a name="ln329">extern	M_APM	MM_lc_log2;</a>
<a name="ln330">extern	M_APM	MM_lc_log10;</a>
<a name="ln331">extern	M_APM	MM_lc_log10R;</a>
<a name="ln332"> </a>
<a name="ln333">/*</a>
<a name="ln334"> *   prototypes for internal functions</a>
<a name="ln335"> */</a>
<a name="ln336"> </a>
<a name="ln337">#ifndef NO_FFT_MULTIPLY</a>
<a name="ln338">extern	void	M_free_all_fft(void);</a>
<a name="ln339">#endif</a>
<a name="ln340"> </a>
<a name="ln341">extern	void	M_init_trig_globals(void);</a>
<a name="ln342">extern	void	M_free_all_add(void);</a>
<a name="ln343">extern	void	M_free_all_div(void);</a>
<a name="ln344">extern	void	M_free_all_exp(void);</a>
<a name="ln345">extern	void	M_free_all_pow(void);</a>
<a name="ln346">extern	void	M_free_all_rnd(void);</a>
<a name="ln347">extern	void	M_free_all_set(void);</a>
<a name="ln348">extern	void	M_free_all_cnst(void);</a>
<a name="ln349">extern	void	M_free_all_fmul(void);</a>
<a name="ln350">extern	void	M_free_all_stck(void);</a>
<a name="ln351">extern	void	M_free_all_util(void);</a>
<a name="ln352"> </a>
<a name="ln353">extern	int 	M_exp_compute_nn(int *, M_APM, M_APM);</a>
<a name="ln354">extern	void	M_raw_exp(M_APM, int, M_APM);</a>
<a name="ln355">extern	void	M_raw_sin(M_APM, int, M_APM);</a>
<a name="ln356">extern	void	M_raw_cos(M_APM, int, M_APM);</a>
<a name="ln357">extern	void	M_5x_sin(M_APM, int, M_APM);</a>
<a name="ln358">extern	void	M_4x_cos(M_APM, int, M_APM);</a>
<a name="ln359">extern	void	M_5x_do_it(M_APM, int, M_APM);</a>
<a name="ln360">extern	void	M_4x_do_it(M_APM, int, M_APM);</a>
<a name="ln361"> </a>
<a name="ln362">extern	M_APM	M_get_stack_var(void);</a>
<a name="ln363">extern	void	M_restore_stack(int);</a>
<a name="ln364">extern	int 	M_get_sizeof_int(void);</a>
<a name="ln365"> </a>
<a name="ln366">extern	void	M_apm_sdivide(M_APM, int, M_APM, M_APM);</a>
<a name="ln367">extern	void	M_cos_to_sin(M_APM, int, M_APM);</a>
<a name="ln368">extern	void	M_limit_angle_to_pi(M_APM, int, M_APM);</a>
<a name="ln369">extern	void	M_log_near_1(M_APM, int, M_APM);</a>
<a name="ln370">extern	void	M_get_sqrt_guess(M_APM, M_APM);</a>
<a name="ln371">extern	void	M_get_cbrt_guess(M_APM, M_APM);</a>
<a name="ln372">extern	void	M_get_log_guess(M_APM, M_APM);</a>
<a name="ln373">extern	void	M_get_asin_guess(M_APM, M_APM);</a>
<a name="ln374">extern	void	M_get_acos_guess(M_APM, M_APM);</a>
<a name="ln375">extern	void	M_arcsin_near_0(M_APM, int, M_APM);</a>
<a name="ln376">extern	void	M_arccos_near_0(M_APM, int, M_APM);</a>
<a name="ln377">extern	void	M_arctan_near_0(M_APM, int, M_APM);</a>
<a name="ln378">extern	void	M_arctan_large_input(M_APM, int, M_APM);</a>
<a name="ln379">extern	void	M_log_basic_iteration(M_APM, int, M_APM);</a>
<a name="ln380">extern  void    M_log_solve_cubic(M_APM, int, M_APM);</a>
<a name="ln381">extern	void	M_check_log_places(int);</a>
<a name="ln382">extern	void	M_log_AGM_R_func(M_APM, int, M_APM, M_APM);</a>
<a name="ln383">extern	void	M_init_util_data(void);</a>
<a name="ln384">extern	void	M_get_div_rem_addr(UCHAR **, UCHAR **);</a>
<a name="ln385">extern	void	M_get_div_rem(int,UCHAR *, UCHAR *);</a>
<a name="ln386">extern	void	M_get_div_rem_10(int, UCHAR *, UCHAR *);</a>
<a name="ln387">extern	void	M_apm_normalize(M_APM);</a>
<a name="ln388">extern	void	M_apm_scale(M_APM, int);</a>
<a name="ln389">extern	void	M_apm_pad(M_APM, int);</a>
<a name="ln390">extern  void    M_long_2_ascii(char *, long);</a>
<a name="ln391">extern	void	M_check_PI_places(int);</a>
<a name="ln392">extern  void    M_calculate_PI_AGM(M_APM, int);</a>
<a name="ln393">extern  void    M_set_to_zero(M_APM);</a>
<a name="ln394">extern	int	M_strposition(char *, char *);</a>
<a name="ln395">extern	char	*M_lowercase(char *);</a>
<a name="ln396">extern  void    M_apm_log_error_msg(int, char *);</a>
<a name="ln397">extern  void	M_apm_round_fixpt(M_APM, int, M_APM);</a>
<a name="ln398"> </a>
<a name="ln399">#endif</a>
<a name="ln400"> </a>

</code></pre>
<div class="balloon" rel="230"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1040/" target="_blank">V1040</a> Possible typo in the spelling of a pre-defined macro name. The '__MINGW_H' macro is similar to '__MINGW__'.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
