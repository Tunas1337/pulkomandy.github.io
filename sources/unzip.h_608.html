
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>unzip.h</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.2.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">/*---------------------------------------------------------------------------</a>
<a name="ln2"> </a>
<a name="ln3">  unzip.h (new)</a>
<a name="ln4"> </a>
<a name="ln5">  Copyright (c) 1990-2002 Info-ZIP.  All rights reserved.</a>
<a name="ln6"> </a>
<a name="ln7">  This header file contains the public macros and typedefs required by</a>
<a name="ln8">  both the UnZip sources and by any application using the UnZip API.  If</a>
<a name="ln9">  UNZIP_INTERNAL is defined, it includes unzpriv.h (containing includes,</a>
<a name="ln10">  prototypes and extern variables used by the actual UnZip sources).</a>
<a name="ln11"> </a>
<a name="ln12">  ---------------------------------------------------------------------------*/</a>
<a name="ln13">/*---------------------------------------------------------------------------</a>
<a name="ln14">This is version 2000-Apr-09 of the Info-ZIP copyright and license.</a>
<a name="ln15">The definitive version of this document should be available at</a>
<a name="ln16">ftp://ftp.info-zip.org/pub/infozip/license.html indefinitely.</a>
<a name="ln17"> </a>
<a name="ln18"> </a>
<a name="ln19">Copyright (c) 1990-2000 Info-ZIP.  All rights reserved.</a>
<a name="ln20"> </a>
<a name="ln21">For the purposes of this copyright and license, &quot;Info-ZIP&quot; is defined as</a>
<a name="ln22">the following set of individuals:</a>
<a name="ln23"> </a>
<a name="ln24">   Mark Adler, John Bush, Karl Davis, Harald Denker, Jean-Michel Dubois,</a>
<a name="ln25">   Jean-loup Gailly, Hunter Goatley, Ian Gorman, Chris Herborth, Dirk Haase,</a>
<a name="ln26">   Greg Hartwig, Robert Heath, Jonathan Hudson, Paul Kienitz, David Kirschbaum,</a>
<a name="ln27">   Johnny Lee, Onno van der Linden, Igor Mandrichenko, Steve P. Miller,</a>
<a name="ln28">   Sergio Monesi, Keith Owens, George Petrov, Greg Roelofs, Kai Uwe Rommel,</a>
<a name="ln29">   Steve Salisbury, Dave Smith, Christian Spieler, Antoine Verheijen,</a>
<a name="ln30">   Paul von Behren, Rich Wales, Mike White</a>
<a name="ln31"> </a>
<a name="ln32">This software is provided &quot;as is,&quot; without warranty of any kind, express</a>
<a name="ln33">or implied.  In no event shall Info-ZIP or its contributors be held liable</a>
<a name="ln34">for any direct, indirect, incidental, special or consequential damages</a>
<a name="ln35">arising out of the use of or inability to use this software.</a>
<a name="ln36"> </a>
<a name="ln37">Permission is granted to anyone to use this software for any purpose,</a>
<a name="ln38">including commercial applications, and to alter it and redistribute it</a>
<a name="ln39">freely, subject to the following restrictions:</a>
<a name="ln40"> </a>
<a name="ln41">    1. Redistributions of source code must retain the above copyright notice,</a>
<a name="ln42">       definition, disclaimer, and this list of conditions.</a>
<a name="ln43"> </a>
<a name="ln44">    2. Redistributions in binary form must reproduce the above copyright</a>
<a name="ln45">       notice, definition, disclaimer, and this list of conditions in</a>
<a name="ln46">       documentation and/or other materials provided with the distribution.</a>
<a name="ln47"> </a>
<a name="ln48">    3. Altered versions--including, but not limited to, ports to new operating</a>
<a name="ln49">       systems, existing ports with new graphical interfaces, and dynamic,</a>
<a name="ln50">       shared, or static library versions--must be plainly marked as such</a>
<a name="ln51">       and must not be misrepresented as being the original source.  Such</a>
<a name="ln52">       altered versions also must not be misrepresented as being Info-ZIP</a>
<a name="ln53">       releases--including, but not limited to, labeling of the altered</a>
<a name="ln54">       versions with the names &quot;Info-ZIP&quot; (or any variation thereof, including,</a>
<a name="ln55">       but not limited to, different capitalizations), &quot;Pocket UnZip,&quot; &quot;WiZ&quot;</a>
<a name="ln56">       or &quot;MacZip&quot; without the explicit permission of Info-ZIP.  Such altered</a>
<a name="ln57">       versions are further prohibited from misrepresentative use of the</a>
<a name="ln58">       Zip-Bugs or Info-ZIP e-mail addresses or of the Info-ZIP URL(s).</a>
<a name="ln59"> </a>
<a name="ln60">    4. Info-ZIP retains the right to use the names &quot;Info-ZIP,&quot; &quot;Zip,&quot; &quot;UnZip,&quot;</a>
<a name="ln61">       &quot;WiZ,&quot; &quot;Pocket UnZip,&quot; &quot;Pocket Zip,&quot; and &quot;MacZip&quot; for its own source and</a>
<a name="ln62">       binary releases.</a>
<a name="ln63">  ---------------------------------------------------------------------------*/</a>
<a name="ln64"> </a>
<a name="ln65">#ifndef __unzip_h   /* prevent multiple inclusions */</a>
<a name="ln66">#define __unzip_h</a>
<a name="ln67"> </a>
<a name="ln68">/*---------------------------------------------------------------------------</a>
<a name="ln69">    Predefined, machine-specific macros.</a>
<a name="ln70">  ---------------------------------------------------------------------------*/</a>
<a name="ln71"> </a>
<a name="ln72">#ifdef __GO32__                 /* MS-DOS extender:  NOT Unix */</a>
<a name="ln73">#  ifdef unix</a>
<a name="ln74">#    undef unix</a>
<a name="ln75">#  endif</a>
<a name="ln76">#  ifdef _unix</a>
<a name="ln77">#    undef _unix</a>
<a name="ln78">#  endif</a>
<a name="ln79">#  ifdef __unix</a>
<a name="ln80">#    undef __unix</a>
<a name="ln81">#  endif</a>
<a name="ln82">#  ifdef __unix__</a>
<a name="ln83">#    undef __unix__</a>
<a name="ln84">#  endif</a>
<a name="ln85">#endif</a>
<a name="ln86"> </a>
<a name="ln87">#if ((defined(__convex__) || defined(__convexc__)) &amp;&amp; !defined(CONVEX))</a>
<a name="ln88">#  define CONVEX</a>
<a name="ln89">#endif</a>
<a name="ln90"> </a>
<a name="ln91">#if (defined(unix) || defined(_unix) || defined(__unix) || defined(__unix__))</a>
<a name="ln92">#  ifndef UNIX</a>
<a name="ln93">#    define UNIX</a>
<a name="ln94">#  endif</a>
<a name="ln95">#endif /* unix || _unix || __unix || __unix__ */</a>
<a name="ln96">#if (defined(M_XENIX) || defined(COHERENT) || defined(__hpux))</a>
<a name="ln97">#  ifndef UNIX</a>
<a name="ln98">#    define UNIX</a>
<a name="ln99">#  endif</a>
<a name="ln100">#endif /* M_XENIX || COHERENT || __hpux */</a>
<a name="ln101">#if (defined(CONVEX) || defined(MINIX) || defined(_AIX) || defined(__QNX__))</a>
<a name="ln102">#  ifndef UNIX</a>
<a name="ln103">#    define UNIX</a>
<a name="ln104">#  endif</a>
<a name="ln105">#endif /* CONVEX || MINIX || _AIX || __QNX__ */</a>
<a name="ln106">#if (defined(__APPLE__))</a>
<a name="ln107">#  ifndef UNIX</a>
<a name="ln108">#    define UNIX</a>
<a name="ln109">#  endif</a>
<a name="ln110">#endif /* __APPLE__ */</a>
<a name="ln111"> </a>
<a name="ln112">#if (defined(VM_CMS) || defined(MVS))</a>
<a name="ln113">#  define CMS_MVS</a>
<a name="ln114">#endif</a>
<a name="ln115"> </a>
<a name="ln116">#if (defined(__OS2__) &amp;&amp; !defined(OS2))</a>
<a name="ln117">#  define OS2</a>
<a name="ln118">#endif</a>
<a name="ln119"> </a>
<a name="ln120">#if (defined(__TANDEM) &amp;&amp; !defined(TANDEM))</a>
<a name="ln121">#  define TANDEM</a>
<a name="ln122">#endif</a>
<a name="ln123"> </a>
<a name="ln124">#if (defined(__VMS) &amp;&amp; !defined(VMS))</a>
<a name="ln125">#  define VMS</a>
<a name="ln126">#endif</a>
<a name="ln127"> </a>
<a name="ln128">#if ((defined(__WIN32__) || defined(_WIN32)) &amp;&amp; !defined(WIN32))</a>
<a name="ln129">#  define WIN32</a>
<a name="ln130">#endif</a>
<a name="ln131">#if ((defined(__WINNT__) || defined(__WINNT)) &amp;&amp; !defined(WIN32))</a>
<a name="ln132">#  define WIN32</a>
<a name="ln133">#endif</a>
<a name="ln134"> </a>
<a name="ln135">#ifdef __COMPILER_KCC__</a>
<a name="ln136">#  include &lt;c-env.h&gt;</a>
<a name="ln137">#  ifdef SYS_T20</a>
<a name="ln138">#    define TOPS20</a>
<a name="ln139">#  endif</a>
<a name="ln140">#endif /* __COMPILER_KCC__ */</a>
<a name="ln141"> </a>
<a name="ln142">/* Borland C does not define __TURBOC__ if compiling for a 32-bit platform */</a>
<a name="ln143">#ifdef __BORLANDC__</a>
<a name="ln144">#  ifndef __TURBOC__</a>
<a name="ln145">#    define __TURBOC__</a>
<a name="ln146">#  endif</a>
<a name="ln147">#  if (!defined(__MSDOS__) &amp;&amp; !defined(OS2) &amp;&amp; !defined(WIN32))</a>
<a name="ln148">#    define __MSDOS__</a>
<a name="ln149">#  endif</a>
<a name="ln150">#endif</a>
<a name="ln151"> </a>
<a name="ln152">/* define MSDOS for Turbo C (unless OS/2) and Power C as well as Microsoft C */</a>
<a name="ln153">#ifdef __POWERC</a>
<a name="ln154">#  define __TURBOC__</a>
<a name="ln155">#  define MSDOS</a>
<a name="ln156">#endif /* __POWERC */</a>
<a name="ln157"> </a>
<a name="ln158">#if (defined(__MSDOS__) &amp;&amp; !defined(MSDOS))   /* just to make sure */</a>
<a name="ln159">#  define MSDOS</a>
<a name="ln160">#endif</a>
<a name="ln161"> </a>
<a name="ln162">/* RSXNTDJ (at least up to v1.3) compiles for WIN32 (RSXNT) using a derivate</a>
<a name="ln163">   of the EMX environment, but defines MSDOS and __GO32__. ARG !!! */</a>
<a name="ln164">#if (defined(MSDOS) &amp;&amp; defined(WIN32))</a>
<a name="ln165">#  undef MSDOS                  /* WIN32 is &gt;&gt;&gt;not&lt;&lt;&lt; MSDOS */</a>
<a name="ln166">#endif</a>
<a name="ln167">#if (defined(__GO32__) &amp;&amp; defined(__EMX__) &amp;&amp; defined(__RSXNT__))</a>
<a name="ln168">#  undef __GO32__</a>
<a name="ln169">#endif</a>
<a name="ln170"> </a>
<a name="ln171">#if (defined(linux) &amp;&amp; !defined(LINUX))</a>
<a name="ln172">#  define LINUX</a>
<a name="ln173">#endif</a>
<a name="ln174"> </a>
<a name="ln175">#ifdef __riscos</a>
<a name="ln176">#  define RISCOS</a>
<a name="ln177">#endif</a>
<a name="ln178"> </a>
<a name="ln179">#if (defined(THINK_C) || defined(MPW))</a>
<a name="ln180">#  define MACOS</a>
<a name="ln181">#endif</a>
<a name="ln182">#if (defined(__MWERKS__) &amp;&amp; defined(macintosh))</a>
<a name="ln183">#  define MACOS</a>
<a name="ln184">#endif</a>
<a name="ln185"> </a>
<a name="ln186">/* use prototypes and ANSI libraries if __STDC__, or Microsoft or Borland C, or</a>
<a name="ln187"> * Silicon Graphics, or Convex?, or IBM C Set/2, or GNU gcc/emx, or Watcom C,</a>
<a name="ln188"> * or Macintosh, or Windows NT, or Sequent, or Atari or IBM RS/6000.</a>
<a name="ln189"> */</a>
<a name="ln190">#if (defined(__STDC__) || defined(MSDOS) || defined(WIN32) || defined(__EMX__))</a>
<a name="ln191">#  ifndef PROTO</a>
<a name="ln192">#    define PROTO</a>
<a name="ln193">#  endif</a>
<a name="ln194">#  ifndef MODERN</a>
<a name="ln195">#    define MODERN</a>
<a name="ln196">#  endif</a>
<a name="ln197">#endif</a>
<a name="ln198">#if (defined(__IBMC__) || defined(__BORLANDC__) || defined(__WATCOMC__))</a>
<a name="ln199">#  ifndef PROTO</a>
<a name="ln200">#    define PROTO</a>
<a name="ln201">#  endif</a>
<a name="ln202">#  ifndef MODERN</a>
<a name="ln203">#    define MODERN</a>
<a name="ln204">#  endif</a>
<a name="ln205">#endif</a>
<a name="ln206">#if (defined(MACOS) || defined(ATARI_ST) || defined(RISCOS) || defined(THEOS))</a>
<a name="ln207">#  ifndef PROTO</a>
<a name="ln208">#    define PROTO</a>
<a name="ln209">#  endif</a>
<a name="ln210">#  ifndef MODERN</a>
<a name="ln211">#    define MODERN</a>
<a name="ln212">#  endif</a>
<a name="ln213">#endif</a>
<a name="ln214">/* Sequent running Dynix/ptx:  non-modern compiler */</a>
<a name="ln215">#if (defined(_AIX) || defined(sgi) || (defined(_SEQUENT_) &amp;&amp; !defined(PTX)))</a>
<a name="ln216">#  ifndef PROTO</a>
<a name="ln217">#    define PROTO</a>
<a name="ln218">#  endif</a>
<a name="ln219">#  ifndef MODERN</a>
<a name="ln220">#    define MODERN</a>
<a name="ln221">#  endif</a>
<a name="ln222">#endif</a>
<a name="ln223">#if (defined(CMS_MVS) || (defined(__BEOS__) || defined(__HAIKU__)))  /* || defined(CONVEX) */</a>
<a name="ln224">#  ifndef PROTO</a>
<a name="ln225">#    define PROTO</a>
<a name="ln226">#  endif</a>
<a name="ln227">#  ifndef MODERN</a>
<a name="ln228">#    define MODERN</a>
<a name="ln229">#  endif</a>
<a name="ln230">#endif</a>
<a name="ln231"> </a>
<a name="ln232">/* turn off prototypes if requested */</a>
<a name="ln233">#if (defined(NOPROTO) &amp;&amp; defined(PROTO))</a>
<a name="ln234">#  undef PROTO</a>
<a name="ln235">#endif</a>
<a name="ln236"> </a>
<a name="ln237">/* used to remove arguments in function prototypes for non-ANSI C */</a>
<a name="ln238">#ifdef PROTO</a>
<a name="ln239">#  define OF(a) a</a>
<a name="ln240">#else</a>
<a name="ln241">#  define OF(a) ()</a>
<a name="ln242">#endif</a>
<a name="ln243"> </a>
<a name="ln244">/* enable the &quot;const&quot; keyword only if MODERN and if not otherwise instructed */</a>
<a name="ln245">#ifdef MODERN</a>
<a name="ln246">#  if (!defined(ZCONST) &amp;&amp; (defined(USE_CONST) || !defined(NO_CONST)))</a>
<a name="ln247">#    define ZCONST const</a>
<a name="ln248">#  endif</a>
<a name="ln249">#endif</a>
<a name="ln250"> </a>
<a name="ln251">#ifndef ZCONST</a>
<a name="ln252">#  define ZCONST</a>
<a name="ln253">#endif</a>
<a name="ln254"> </a>
<a name="ln255"> </a>
<a name="ln256">/*---------------------------------------------------------------------------</a>
<a name="ln257">    Grab system-specific public include headers.</a>
<a name="ln258">  ---------------------------------------------------------------------------*/</a>
<a name="ln259"> </a>
<a name="ln260">#ifdef POCKET_UNZIP             /* WinCE port */</a>
<a name="ln261">#  include &quot;wince/punzip.h&quot;     /* must appear before windows.h */</a>
<a name="ln262">#endif</a>
<a name="ln263"> </a>
<a name="ln264">#ifdef WINDLL</a>
<a name="ln265">   /* for UnZip, the &quot;basic&quot; part of the win32 api is sufficient */</a>
<a name="ln266">#  ifndef WIN32_LEAN_AND_MEAN</a>
<a name="ln267">#    define WIN32_LEAN_AND_MEAN</a>
<a name="ln268">#    define IZ_HASDEFINED_WIN32LEAN</a>
<a name="ln269">#  endif</a>
<a name="ln270">#  include &lt;windows.h&gt;</a>
<a name="ln271">#  include &quot;windll/structs.h&quot;</a>
<a name="ln272">#  ifdef IZ_HASDEFINEd_WIN32LEAN</a>
<a name="ln273">#    undef WIN32_LEAN_AND_MEAN</a>
<a name="ln274">#    undef IZ_HASDEFINED_WIN32LEAN</a>
<a name="ln275">#  endif</a>
<a name="ln276">#endif</a>
<a name="ln277"> </a>
<a name="ln278">/*---------------------------------------------------------------------------</a>
<a name="ln279">    Grab system-dependent definition of EXPENTRY for prototypes below.</a>
<a name="ln280">  ---------------------------------------------------------------------------*/</a>
<a name="ln281"> </a>
<a name="ln282">#if 0</a>
<a name="ln283">#if (defined(OS2) &amp;&amp; !defined(FUNZIP))</a>
<a name="ln284">#  ifdef UNZIP_INTERNAL</a>
<a name="ln285">#    define INCL_NOPM</a>
<a name="ln286">#    define INCL_DOSNLS</a>
<a name="ln287">#    define INCL_DOSPROCESS</a>
<a name="ln288">#    define INCL_DOSDEVICES</a>
<a name="ln289">#    define INCL_DOSDEVIOCTL</a>
<a name="ln290">#    define INCL_DOSERRORS</a>
<a name="ln291">#    define INCL_DOSMISC</a>
<a name="ln292">#    ifdef OS2DLL</a>
<a name="ln293">#      define INCL_REXXSAA</a>
<a name="ln294">#      include &lt;rexxsaa.h&gt;</a>
<a name="ln295">#    endif</a>
<a name="ln296">#  endif /* UNZIP_INTERNAL */</a>
<a name="ln297">#  include &lt;os2.h&gt;</a>
<a name="ln298">#  define UZ_EXP EXPENTRY</a>
<a name="ln299">#endif /* OS2 &amp;&amp; !FUNZIP */</a>
<a name="ln300">#endif /* 0 */</a>
<a name="ln301"> </a>
<a name="ln302">#if (defined(OS2) &amp;&amp; !defined(FUNZIP))</a>
<a name="ln303">#  if (defined(__IBMC__) || defined(__WATCOMC__))</a>
<a name="ln304">#    define UZ_EXP  _System    /* compiler keyword */</a>
<a name="ln305">#  else</a>
<a name="ln306">#    define UZ_EXP</a>
<a name="ln307">#  endif</a>
<a name="ln308">#endif /* OS2 &amp;&amp; !FUNZIP */</a>
<a name="ln309"> </a>
<a name="ln310">#if (defined(WINDLL) || defined(USE_UNZIP_LIB))</a>
<a name="ln311">#  ifndef EXPENTRY</a>
<a name="ln312">#    define UZ_EXP WINAPI</a>
<a name="ln313">#  else</a>
<a name="ln314">#    define UZ_EXP EXPENTRY</a>
<a name="ln315">#  endif</a>
<a name="ln316">#endif</a>
<a name="ln317"> </a>
<a name="ln318">#ifndef UZ_EXP</a>
<a name="ln319">#  define UZ_EXP</a>
<a name="ln320">#endif</a>
<a name="ln321"> </a>
<a name="ln322"> </a>
<a name="ln323">/*---------------------------------------------------------------------------</a>
<a name="ln324">    Public typedefs.</a>
<a name="ln325">  ---------------------------------------------------------------------------*/</a>
<a name="ln326"> </a>
<a name="ln327">#ifndef _IZ_TYPES_DEFINED</a>
<a name="ln328">#ifdef MODERN</a>
<a name="ln329">   typedef void zvoid;</a>
<a name="ln330">#else /* !MODERN */</a>
<a name="ln331">#  ifndef AOS_VS         /* mostly modern? */</a>
<a name="ln332">#    ifndef VAXC         /* not fully modern, but has knows 'void' */</a>
<a name="ln333">#      define void int</a>
<a name="ln334">#    endif /* !VAXC */</a>
<a name="ln335">#  endif /* !AOS_VS */</a>
<a name="ln336">   typedef char zvoid;</a>
<a name="ln337">#endif /* ?MODERN */</a>
<a name="ln338">typedef unsigned char   uch;    /* code assumes unsigned bytes; these type-  */</a>
<a name="ln339">typedef unsigned short  ush;    /*  defs replace byte/UWORD/ULONG (which are */</a>
<a name="ln340">typedef unsigned long   ulg;    /*  predefined on some systems) &amp; match zip  */</a>
<a name="ln341">#define _IZ_TYPES_DEFINED</a>
<a name="ln342">#endif /* !_IZ_TYPES_DEFINED */</a>
<a name="ln343"> </a>
<a name="ln344">/* InputFn is not yet used and is likely to change: */</a>
<a name="ln345">#ifdef PROTO</a>
<a name="ln346">   typedef int   (UZ_EXP MsgFn)     (zvoid *pG, uch *buf, ulg size, int flag);</a>
<a name="ln347">   typedef int   (UZ_EXP InputFn)   (zvoid *pG, uch *buf, int *size, int flag);</a>
<a name="ln348">   typedef void  (UZ_EXP PauseFn)   (zvoid *pG, ZCONST char *prompt, int flag);</a>
<a name="ln349">   typedef int   (UZ_EXP PasswdFn)  (zvoid *pG, int *rcnt, char *pwbuf,</a>
<a name="ln350">                                     int size, ZCONST char *zfn,</a>
<a name="ln351">                                     ZCONST char *efn);</a>
<a name="ln352">   typedef int   (UZ_EXP StatCBFn)  (zvoid *pG, int fnflag, ZCONST char *zfn,</a>
<a name="ln353">                                     ZCONST char *efn, ZCONST zvoid *details);</a>
<a name="ln354">   typedef void  (UZ_EXP UsrIniFn)  (void);</a>
<a name="ln355">#else /* !PROTO */</a>
<a name="ln356">   typedef int   (UZ_EXP MsgFn)     ();</a>
<a name="ln357">   typedef int   (UZ_EXP InputFn)   ();</a>
<a name="ln358">   typedef void  (UZ_EXP PauseFn)   ();</a>
<a name="ln359">   typedef int   (UZ_EXP PasswdFn)  ();</a>
<a name="ln360">   typedef int   (UZ_EXP StatCBFn)  ();</a>
<a name="ln361">   typedef void  (UZ_EXP UsrIniFn)  ();</a>
<a name="ln362">#endif /* ?PROTO */</a>
<a name="ln363"> </a>
<a name="ln364">typedef struct _UzpBuffer {    /* rxstr */</a>
<a name="ln365">    ulg   strlength;           /* length of string */</a>
<a name="ln366">    char  *strptr;             /* pointer to string */</a>
<a name="ln367">} UzpBuffer;</a>
<a name="ln368"> </a>
<a name="ln369">typedef struct _UzpInit {</a>
<a name="ln370">    ulg structlen;             /* length of the struct being passed */</a>
<a name="ln371"> </a>
<a name="ln372">    /* GRR: can we assume that each of these is a 32-bit pointer?  if not,</a>
<a name="ln373">     * does it matter? add &quot;far&quot; keyword to make sure? */</a>
<a name="ln374">    MsgFn *msgfn;</a>
<a name="ln375">    InputFn *inputfn;</a>
<a name="ln376">    PauseFn *pausefn;</a>
<a name="ln377">    UsrIniFn *userfn;          /* user init function to be called after */</a>
<a name="ln378">                               /*  globals constructed and initialized */</a>
<a name="ln379"> </a>
<a name="ln380">    /* pointer to program's environment area or something? */</a>
<a name="ln381">    /* hooks for performance testing? */</a>
<a name="ln382">    /* hooks for extra unzip -v output? (detect CPU or other hardware?) */</a>
<a name="ln383">    /* anything else?  let me (Greg) know... */</a>
<a name="ln384">} UzpInit;</a>
<a name="ln385"> </a>
<a name="ln386">typedef struct _UzpCB {</a>
<a name="ln387">    ulg structlen;             /* length of the struct being passed */</a>
<a name="ln388">    /* GRR: can we assume that each of these is a 32-bit pointer?  if not,</a>
<a name="ln389">     * does it matter? add &quot;far&quot; keyword to make sure? */</a>
<a name="ln390">    MsgFn *msgfn;</a>
<a name="ln391">    InputFn *inputfn;</a>
<a name="ln392">    PauseFn *pausefn;</a>
<a name="ln393">    PasswdFn *passwdfn;</a>
<a name="ln394">    StatCBFn *statrepfn;</a>
<a name="ln395">} UzpCB;</a>
<a name="ln396"> </a>
<a name="ln397">/* the collection of general UnZip option flags and option arguments */</a>
<a name="ln398">typedef struct _UzpOpts {</a>
<a name="ln399">#ifndef FUNZIP</a>
<a name="ln400">    char *exdir;        /* pointer to extraction root directory (-d option) */</a>
<a name="ln401">    char *pwdarg;       /* pointer to command-line password (-P option) */</a>
<a name="ln402">    int zipinfo_mode;   /* behave like ZipInfo or like normal UnZip? */</a>
<a name="ln403">    int aflag;          /* -a: do ASCII-EBCDIC and/or end-of-line translation */</a>
<a name="ln404">#ifdef VMS</a>
<a name="ln405">    int bflag;          /* -b: force fixed record format for binary files */</a>
<a name="ln406">#endif</a>
<a name="ln407">#ifdef TANDEM</a>
<a name="ln408">    int bflag;          /* -b: create text files in 'C' format (180)*/</a>
<a name="ln409">#endif</a>
<a name="ln410">#ifdef UNIXBACKUP</a>
<a name="ln411">    int B_flag;         /* -B: back up existing files by renaming to *~ first */</a>
<a name="ln412">#endif</a>
<a name="ln413">    int cflag;          /* -c: output to stdout */</a>
<a name="ln414">    int C_flag;         /* -C: match filenames case-insensitively */</a>
<a name="ln415">#ifdef MACOS</a>
<a name="ln416">    int E_flag;         /* -E: [MacOS] show Mac extra field during restoring */</a>
<a name="ln417">#endif</a>
<a name="ln418">    int fflag;          /* -f: &quot;freshen&quot; (extract only newer files) */</a>
<a name="ln419">#if (defined(RISCOS) || defined(ACORN_FTYPE_NFS))</a>
<a name="ln420">    int acorn_nfs_ext;  /* -F: RISC OS types &amp; NFS filetype extensions */</a>
<a name="ln421">#endif</a>
<a name="ln422">    int hflag;          /* -h: header line (zipinfo) */</a>
<a name="ln423">#ifdef MACOS</a>
<a name="ln424">    int i_flag;         /* -i: [MacOS] ignore filenames stored in Mac e.f. */</a>
<a name="ln425">#endif</a>
<a name="ln426">#ifdef RISCOS</a>
<a name="ln427">    int scanimage;      /* -I: scan image files */</a>
<a name="ln428">#endif</a>
<a name="ln429">    int jflag;          /* -j: junk pathnames (unzip) */</a>
<a name="ln430">#if ((defined(__BEOS__) || defined(__HAIKU__)) || defined(MACOS) || defined(HAS_JUNK_EXTRA_FIELD_OPTION))</a>
<a name="ln431">    int J_flag;         /* -J: ignore BeOS/MacOS extra field info (unzip) */</a>
<a name="ln432">#endif</a>
<a name="ln433">    int lflag;          /* -12slmv: listing format (zipinfo) */</a>
<a name="ln434">    int L_flag;         /* -L: convert filenames from some OSes to lowercase */</a>
<a name="ln435">    int overwrite_none; /* -n: never overwrite files (no prompting) */</a>
<a name="ln436">#ifdef AMIGA</a>
<a name="ln437">    int N_flag;         /* -N: restore comments as AmigaDOS filenotes */</a>
<a name="ln438">#endif</a>
<a name="ln439">    int overwrite_all;  /* -o: OK to overwrite files without prompting */</a>
<a name="ln440">#endif /* !FUNZIP */</a>
<a name="ln441">    int qflag;          /* -q: produce a lot less output */</a>
<a name="ln442">#ifndef FUNZIP</a>
<a name="ln443">#if (defined(MSDOS) || defined(FLEXOS) || defined(OS2) || defined(WIN32))</a>
<a name="ln444">    int sflag;          /* -s: convert spaces in filenames to underscores */</a>
<a name="ln445">#endif</a>
<a name="ln446">#if (defined(NLM))</a>
<a name="ln447">    int sflag;          /* -s: convert spaces in filenames to underscores */</a>
<a name="ln448">#endif</a>
<a name="ln449">#if (defined(MSDOS) || defined(__human68k__) || defined(OS2) || defined(WIN32))</a>
<a name="ln450">    int volflag;        /* -$: extract volume labels */</a>
<a name="ln451">#endif</a>
<a name="ln452">    int tflag;          /* -t: test (unzip) or totals line (zipinfo) */</a>
<a name="ln453">    int T_flag;         /* -T: timestamps (unzip) or dec. time fmt (zipinfo) */</a>
<a name="ln454">    int uflag;          /* -u: &quot;update&quot; (extract only newer/brand-new files) */</a>
<a name="ln455">    int vflag;          /* -v: (verbosely) list directory */</a>
<a name="ln456">    int V_flag;         /* -V: don't strip VMS version numbers */</a>
<a name="ln457">#if ((defined(__BEOS__) || defined(__HAIKU__)) || defined(TANDEM) || defined(THEOS) || defined(UNIX))</a>
<a name="ln458">    int X_flag;         /* -X: restore owner/protection or UID/GID or ACLs */</a>
<a name="ln459">#endif</a>
<a name="ln460">#if (defined(OS2) || defined(VMS) || defined(WIN32))</a>
<a name="ln461">    int X_flag;         /* -X: restore owner/protection or UID/GID or ACLs */</a>
<a name="ln462">#endif</a>
<a name="ln463">    int zflag;          /* -z: display the zipfile comment (only, for unzip) */</a>
<a name="ln464">#if (!defined(RISCOS) &amp;&amp; !defined(CMS_MVS) &amp;&amp; !defined(TANDEM))</a>
<a name="ln465">    int ddotflag;       /* -:: don't skip over &quot;../&quot; path elements */</a>
<a name="ln466">#endif</a>
<a name="ln467">#endif /* !FUNZIP */</a>
<a name="ln468">} UzpOpts;</a>
<a name="ln469"> </a>
<a name="ln470">/* intended to be a private struct: */</a>
<a name="ln471">typedef struct _ver {</a>
<a name="ln472">    uch major;              /* e.g., integer 5 */</a>
<a name="ln473">    uch minor;              /* e.g., 2 */</a>
<a name="ln474">    uch patchlevel;         /* e.g., 0 */</a>
<a name="ln475">    uch not_used;</a>
<a name="ln476">} _version_type;</a>
<a name="ln477"> </a>
<a name="ln478">typedef struct _UzpVer {</a>
<a name="ln479">    ulg structlen;          /* length of the struct being passed */</a>
<a name="ln480">    ulg flag;               /* bit 0: is_beta   bit 1: uses_zlib */</a>
<a name="ln481">    char *betalevel;        /* e.g., &quot;g BETA&quot; or &quot;&quot; */</a>
<a name="ln482">    char *date;             /* e.g., &quot;4 Sep 95&quot; (beta) or &quot;4 September 1995&quot; */</a>
<a name="ln483">    char *zlib_version;     /* e.g., &quot;0.95&quot; or NULL */</a>
<a name="ln484">    _version_type unzip;</a>
<a name="ln485">    _version_type zipinfo;</a>
<a name="ln486">    _version_type os2dll;</a>
<a name="ln487">    _version_type windll;</a>
<a name="ln488">} UzpVer;</a>
<a name="ln489"> </a>
<a name="ln490">/* for Visual BASIC access to Windows DLLs: */</a>
<a name="ln491">typedef struct _UzpVer2 {</a>
<a name="ln492">    ulg structlen;          /* length of the struct being passed */</a>
<a name="ln493">    ulg flag;               /* bit 0: is_beta   bit 1: uses_zlib */</a>
<a name="ln494">    char betalevel[10];     /* e.g., &quot;g BETA&quot; or &quot;&quot; */</a>
<a name="ln495">    char date[20];          /* e.g., &quot;4 Sep 95&quot; (beta) or &quot;4 September 1995&quot; */</a>
<a name="ln496">    char zlib_version[10];  /* e.g., &quot;0.95&quot; or NULL */</a>
<a name="ln497">    _version_type unzip;</a>
<a name="ln498">    _version_type zipinfo;</a>
<a name="ln499">    _version_type os2dll;</a>
<a name="ln500">    _version_type windll;</a>
<a name="ln501">} UzpVer2;</a>
<a name="ln502"> </a>
<a name="ln503">typedef struct central_directory_file_header { /* CENTRAL */</a>
<a name="ln504">    uch version_made_by[2];</a>
<a name="ln505">    uch version_needed_to_extract[2];</a>
<a name="ln506">    ush general_purpose_bit_flag;</a>
<a name="ln507">    ush compression_method;</a>
<a name="ln508">    ulg last_mod_dos_datetime;</a>
<a name="ln509">    ulg crc32;</a>
<a name="ln510">    ulg csize;</a>
<a name="ln511">    ulg ucsize;</a>
<a name="ln512">    ush filename_length;</a>
<a name="ln513">    ush extra_field_length;</a>
<a name="ln514">    ush file_comment_length;</a>
<a name="ln515">    ush disk_number_start;</a>
<a name="ln516">    ush internal_file_attributes;</a>
<a name="ln517">    ulg external_file_attributes;</a>
<a name="ln518">    ulg relative_offset_local_header;</a>
<a name="ln519">} cdir_file_hdr;</a>
<a name="ln520"> </a>
<a name="ln521"> </a>
<a name="ln522">#define UZPINIT_LEN   sizeof(UzpInit)</a>
<a name="ln523">#define UZPVER_LEN    sizeof(UzpVer)</a>
<a name="ln524">#define cbList(func)  int (* UZ_EXP func)(char *filename, cdir_file_hdr *crec)</a>
<a name="ln525"> </a>
<a name="ln526"> </a>
<a name="ln527">/*---------------------------------------------------------------------------</a>
<a name="ln528">    Return (and exit) values of the public UnZip API functions.</a>
<a name="ln529">  ---------------------------------------------------------------------------*/</a>
<a name="ln530"> </a>
<a name="ln531">/* external return codes */</a>
<a name="ln532">#define PK_OK              0   /* no error */</a>
<a name="ln533">#define PK_COOL            0   /* no error */</a>
<a name="ln534">#define PK_WARN            1   /* warning error */</a>
<a name="ln535">#define PK_ERR             2   /* error in zipfile */</a>
<a name="ln536">#define PK_BADERR          3   /* severe error in zipfile */</a>
<a name="ln537">#define PK_MEM             4   /* insufficient memory (during initialization) */</a>
<a name="ln538">#define PK_MEM2            5   /* insufficient memory (password failure) */</a>
<a name="ln539">#define PK_MEM3            6   /* insufficient memory (file decompression) */</a>
<a name="ln540">#define PK_MEM4            7   /* insufficient memory (memory decompression) */</a>
<a name="ln541">#define PK_MEM5            8   /* insufficient memory (not yet used) */</a>
<a name="ln542">#define PK_NOZIP           9   /* zipfile not found */</a>
<a name="ln543">#define PK_PARAM          10   /* bad or illegal parameters specified */</a>
<a name="ln544">#define PK_FIND           11   /* no files found */</a>
<a name="ln545">#define PK_DISK           50   /* disk full */</a>
<a name="ln546">#define PK_EOF            51   /* unexpected EOF */</a>
<a name="ln547"> </a>
<a name="ln548">#define IZ_CTRLC          80   /* user hit ^C to terminate */</a>
<a name="ln549">#define IZ_UNSUP          81   /* no files found: all unsup. compr/encrypt. */</a>
<a name="ln550">#define IZ_BADPWD         82   /* no files found: all had bad password */</a>
<a name="ln551"> </a>
<a name="ln552">/* return codes of password fetches (negative = user abort; positive = error) */</a>
<a name="ln553">#define IZ_PW_ENTERED      0   /* got some password string; use/try it */</a>
<a name="ln554">#define IZ_PW_CANCEL      -1   /* no password available (for this entry) */</a>
<a name="ln555">#define IZ_PW_CANCELALL   -2   /* no password, skip any further pwd. request */</a>
<a name="ln556">#define IZ_PW_ERROR        5   /* = PK_MEM2 : failure (no mem, no tty, ...) */</a>
<a name="ln557"> </a>
<a name="ln558">/* flag values for status callback function */</a>
<a name="ln559">#define UZ_ST_START_EXTRACT     1       /* no details */</a>
<a name="ln560">#define UZ_ST_IN_PROGRESS       2       /* no details */</a>
<a name="ln561">#define UZ_ST_FINISH_MEMBER     3       /* 'details': extracted size */</a>
<a name="ln562"> </a>
<a name="ln563">/* return values of status callback function */</a>
<a name="ln564">#define UZ_ST_CONTINUE          0</a>
<a name="ln565">#define UZ_ST_BREAK             1</a>
<a name="ln566"> </a>
<a name="ln567"> </a>
<a name="ln568">/*---------------------------------------------------------------------------</a>
<a name="ln569">    Prototypes for public UnZip API (DLL) functions.</a>
<a name="ln570">  ---------------------------------------------------------------------------*/</a>
<a name="ln571"> </a>
<a name="ln572">#define  UzpMatch match</a>
<a name="ln573"> </a>
<a name="ln574">int      UZ_EXP UzpMain            OF((int argc, char **argv));</a>
<a name="ln575">int      UZ_EXP UzpAltMain         OF((int argc, char **argv, UzpInit *init));</a>
<a name="ln576">UzpVer * UZ_EXP UzpVersion         OF((void));</a>
<a name="ln577">void     UZ_EXP UzpFreeMemBuffer   OF((UzpBuffer *retstr));</a>
<a name="ln578">#ifndef WINDLL</a>
<a name="ln579">int      UZ_EXP UzpUnzipToMemory   OF((char *zip, char *file, UzpOpts *optflgs,</a>
<a name="ln580">                                       UzpCB *UsrFunc, UzpBuffer *retstr));</a>
<a name="ln581">int      UZ_EXP UzpGrep            OF((char *archive, char *file,</a>
<a name="ln582">                                       char *pattern, int cmd, int SkipBin,</a>
<a name="ln583">                                       UzpCB *UsrFunc));</a>
<a name="ln584">#endif</a>
<a name="ln585">#ifdef OS2</a>
<a name="ln586">int      UZ_EXP UzpFileTree        OF((char *name, cbList(callBack),</a>
<a name="ln587">                                       char *cpInclude[], char *cpExclude[]));</a>
<a name="ln588">#endif</a>
<a name="ln589"> </a>
<a name="ln590">void     UZ_EXP UzpVersion2        OF((UzpVer2 *version));</a>
<a name="ln591">int      UZ_EXP UzpValidate        OF((char *archive, int AllCodes));</a>
<a name="ln592"> </a>
<a name="ln593"> </a>
<a name="ln594">/* default I/O functions (can be swapped out via UzpAltMain() entry point): */</a>
<a name="ln595"> </a>
<a name="ln596">int      UZ_EXP UzpMessagePrnt   OF((zvoid *pG, uch *buf, ulg size, int flag));</a>
<a name="ln597">int      UZ_EXP UzpMessageNull   OF((zvoid *pG, uch *buf, ulg size, int flag));</a>
<a name="ln598">int      UZ_EXP UzpInput         OF((zvoid *pG, uch *buf, int *size, int flag));</a>
<a name="ln599">void     UZ_EXP UzpMorePause     OF((zvoid *pG, ZCONST char *prompt, int flag));</a>
<a name="ln600">int      UZ_EXP UzpPassword      OF((zvoid *pG, int *rcnt, char *pwbuf,</a>
<a name="ln601">                                     int size, ZCONST char *zfn,</a>
<a name="ln602">                                     ZCONST char *efn));</a>
<a name="ln603"> </a>
<a name="ln604"> </a>
<a name="ln605">/*---------------------------------------------------------------------------</a>
<a name="ln606">    Remaining private stuff for UnZip compilation.</a>
<a name="ln607">  ---------------------------------------------------------------------------*/</a>
<a name="ln608"> </a>
<a name="ln609">#ifdef UNZIP_INTERNAL</a>
<a name="ln610">#  include &quot;unzpriv.h&quot;</a>
<a name="ln611">#endif</a>
<a name="ln612"> </a>
<a name="ln613"> </a>
<a name="ln614">#endif /* !__unzip_h */</a>

</code></pre>
<div class="balloon" rel="76"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1040/" target="_blank">V1040</a> Possible typo in the spelling of a pre-defined macro name. The '_unix' macro is similar to '__unix'.</p></div>
<div class="balloon" rel="91"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v1040/" target="_blank">V1040</a> Possible typo in the spelling of a pre-defined macro name. The '_unix' macro is similar to '__unix'.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
