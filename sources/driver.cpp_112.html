
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
  <title>driver.cpp</title>

  <link rel="stylesheet" href="../style.css"/>
  <script src="../jquery-3.2.1.min.js"></script>
</head>
<body>

<pre><code class = "cpp">
<a name="ln1">/*</a>
<a name="ln2"> * Copyright (c) 2002, Thomas Kurschel</a>
<a name="ln3"> * Copyright 2004-2016 Haiku, Inc. All rights reserved.</a>
<a name="ln4"> * Distributed under the terms of the MIT License.</a>
<a name="ln5"> *</a>
<a name="ln6"> * Authors:</a>
<a name="ln7"> *		Thomas Kurschel</a>
<a name="ln8"> *		Clemens Zeidler, &lt;haiku@clemens-zeidler.de&gt;</a>
<a name="ln9"> *		Alexander von Gluck IV, kallisti5@unixzen.com</a>
<a name="ln10"> */</a>
<a name="ln11"> </a>
<a name="ln12"> </a>
<a name="ln13">#include &quot;driver.h&quot;</a>
<a name="ln14">#include &quot;device.h&quot;</a>
<a name="ln15">#include &quot;lock.h&quot;</a>
<a name="ln16"> </a>
<a name="ln17">#include &lt;stdlib.h&gt;</a>
<a name="ln18">#include &lt;stdio.h&gt;</a>
<a name="ln19">#include &lt;string.h&gt;</a>
<a name="ln20"> </a>
<a name="ln21">#include &lt;AGP.h&gt;</a>
<a name="ln22">#include &lt;KernelExport.h&gt;</a>
<a name="ln23">#include &lt;OS.h&gt;</a>
<a name="ln24">#include &lt;PCI.h&gt;</a>
<a name="ln25">#include &lt;SupportDefs.h&gt;</a>
<a name="ln26"> </a>
<a name="ln27"> </a>
<a name="ln28">#define TRACE_DRIVER</a>
<a name="ln29">#ifdef TRACE_DRIVER</a>
<a name="ln30">#	define TRACE(x...) dprintf(&quot;radeon_hd: &quot; x)</a>
<a name="ln31">#else</a>
<a name="ln32">#	define TRACE(x...) ;</a>
<a name="ln33">#endif</a>
<a name="ln34"> </a>
<a name="ln35">#define ERROR(x...) dprintf(&quot;radeon_hd: &quot; x)</a>
<a name="ln36"> </a>
<a name="ln37">#define MAX_CARDS 1</a>
<a name="ln38"> </a>
<a name="ln39"> </a>
<a name="ln40">// ATI / AMD cards starting at the Radeon X700 have an AtomBIOS</a>
<a name="ln41"> </a>
<a name="ln42">// list of supported devices</a>
<a name="ln43">const struct supported_device {</a>
<a name="ln44">	uint32		pciID;</a>
<a name="ln45">	uint8		dceMajor;	// Display block family</a>
<a name="ln46">	uint8		dceMinor;	// Display block family</a>
<a name="ln47">	uint16		chipsetID;</a>
<a name="ln48">	uint32		chipsetFlags;</a>
<a name="ln49">	const char*	deviceName;</a>
<a name="ln50">} kSupportedDevices[] = {</a>
<a name="ln51">	// Marketing Names: Radeon X?00</a>
<a name="ln52">	// Intorduced: 2004</a>
<a name="ln53">	// Codename: Loki</a>
<a name="ln54">	// R420 Series  (Radeon) DCE 0.0 (*very* early AtomBIOS)</a>
<a name="ln55"> </a>
<a name="ln56">	// Marketing Names: Radeon X1?00</a>
<a name="ln57">	// Introduced: 2005</a>
<a name="ln58">	// Codename: Fudo</a>
<a name="ln59">	#if 0</a>
<a name="ln60">	{0x791e, 1, 0, RADEON_RS690, CHIP_IGP, &quot;Radeon X1200&quot;},</a>
<a name="ln61">	{0x791f, 1, 0, RADEON_RS690, CHIP_IGP, &quot;Radeon X1200&quot;},</a>
<a name="ln62">	{0x793f, 1, 0, RADEON_RS600, CHIP_IGP, &quot;Radeon X1200&quot;},</a>
<a name="ln63">	{0x7941, 1, 0, RADEON_RS600, CHIP_IGP, &quot;Radeon X1200&quot;},</a>
<a name="ln64">	{0x7942, 1, 0, RADEON_RS600, CHIP_IGP, &quot;Radeon X1250&quot;},</a>
<a name="ln65">	{0x796c, 1, 0, RADEON_RS740, CHIP_IGP, &quot;Radeon RS740&quot;},</a>
<a name="ln66">	{0x796d, 1, 0, RADEON_RS740, CHIP_IGP, &quot;Radeon RS740&quot;},</a>
<a name="ln67">	{0x796e, 1, 0, RADEON_RS740, CHIP_IGP, &quot;Radeon 2100&quot;},</a>
<a name="ln68">	{0x796f, 1, 0, RADEON_RS740, CHIP_IGP, &quot;Radeon RS740&quot;},</a>
<a name="ln69">	{0x7140, 1, 0, RADEON_RV515, CHIP_STD, &quot;Radeon X1600&quot;},</a>
<a name="ln70">	{0x7100, 1, 0, RADEON_R520,  CHIP_STD, &quot;Radeon X1800&quot;},</a>
<a name="ln71">	{0x7104, 1, 0, RADEON_R520,  CHIP_STD, &quot;FireGL v7200&quot;},</a>
<a name="ln72">	{0x7109, 1, 0, RADEON_R520,  CHIP_STD, &quot;Radeon X1800&quot;},</a>
<a name="ln73">	{0x710a, 1, 0, RADEON_R520,  CHIP_STD, &quot;Radeon X1800&quot;},</a>
<a name="ln74">	{0x710b, 1, 0, RADEON_R520,  CHIP_STD, &quot;Radeon X1800&quot;},</a>
<a name="ln75">	{0x710c, 1, 0, RADEON_R520,  CHIP_STD, &quot;Radeon X1800&quot;},</a>
<a name="ln76">	{0x7120, 1, 0, RADEON_R520,  CHIP_STD, &quot;Radeon X1800&quot;},</a>
<a name="ln77">	{0x7129, 1, 0, RADEON_R520,  CHIP_STD, &quot;Radeon X1800&quot;},</a>
<a name="ln78">	#endif</a>
<a name="ln79"> </a>
<a name="ln80">	// Marketing Names: Radeon HD 24xx - HD 42xx</a>
<a name="ln81">	// Introduced: 2006</a>
<a name="ln82">	// Codename: Pele</a>
<a name="ln83">	// Process: 55 nm</a>
<a name="ln84">	{0x94c7, 2, 0, RADEON_RV610, CHIP_STD, &quot;Radeon HD 2350&quot;},</a>
<a name="ln85">	{0x94c1, 2, 0, RADEON_RV610, CHIP_IGP, &quot;Radeon HD 2400&quot;},</a>
<a name="ln86">	{0x94c3, 2, 0, RADEON_RV610, CHIP_STD, &quot;Radeon HD 2400&quot;},</a>
<a name="ln87">	{0x94c9, 2, 0, RADEON_RV610, CHIP_IGP, &quot;Mobility Radeon HD 2400&quot;},</a>
<a name="ln88">	{0x94cc, 2, 0, RADEON_RV610, CHIP_STD, &quot;Radeon HD 2400&quot;},</a>
<a name="ln89">	{0x9519, 2, 0, RADEON_RV630, CHIP_STD, &quot;AMD FireStream 9170&quot;},</a>
<a name="ln90">	{0x9586, 2, 0, RADEON_RV630, CHIP_STD, &quot;Radeon HD 2600&quot;},</a>
<a name="ln91">	{0x9588, 2, 0, RADEON_RV630, CHIP_STD, &quot;Radeon HD 2600&quot;},</a>
<a name="ln92">	{0x958a, 2, 0, RADEON_RV630, CHIP_STD, &quot;Radeon HD 2600 X2&quot;},</a>
<a name="ln93">	//	Radeon 2700		- RV630</a>
<a name="ln94">	{0x9400, 2, 0, RADEON_R600,  CHIP_STD, &quot;Radeon HD 2900&quot;},</a>
<a name="ln95">	{0x9401, 2, 0, RADEON_R600,  CHIP_STD, &quot;Radeon HD 2900&quot;},</a>
<a name="ln96">	{0x9402, 2, 0, RADEON_R600,  CHIP_STD, &quot;Radeon HD 2900&quot;},</a>
<a name="ln97">	{0x9403, 2, 0, RADEON_R600,  CHIP_STD, &quot;Radeon HD 2900 Pro&quot;},</a>
<a name="ln98">	{0x9405, 2, 0, RADEON_R600,  CHIP_STD, &quot;Radeon HD 2900&quot;},</a>
<a name="ln99">	{0x940a, 2, 0, RADEON_R600,  CHIP_STD, &quot;Radeon FireGL V8650&quot;},</a>
<a name="ln100">	{0x940b, 2, 0, RADEON_R600,  CHIP_STD, &quot;Radeon FireGL V8600&quot;},</a>
<a name="ln101">	{0x940f, 2, 0, RADEON_R600,  CHIP_STD, &quot;Radeon FireGL V7600&quot;},</a>
<a name="ln102">	{0x9616, 2, 0, RADEON_RV610, CHIP_IGP, &quot;Radeon HD 3000&quot;},</a>
<a name="ln103">	{0x9611, 3, 0, RADEON_RV620, CHIP_IGP, &quot;Radeon HD 3100&quot;},</a>
<a name="ln104">	{0x9613, 3, 0, RADEON_RV620, CHIP_IGP, &quot;Radeon HD 3100&quot;},</a>
<a name="ln105">	{0x9610, 2, 0, RADEON_RV610, CHIP_IGP, &quot;Radeon HD 3200&quot;},</a>
<a name="ln106">	{0x9612, 2, 0, RADEON_RV610, CHIP_IGP, &quot;Radeon HD 3200&quot;},</a>
<a name="ln107">	{0x9615, 2, 0, RADEON_RV610, CHIP_IGP, &quot;Radeon HD 3200&quot;},</a>
<a name="ln108">	{0x9614, 2, 0, RADEON_RV610, CHIP_IGP, &quot;Radeon HD 3300&quot;},</a>
<a name="ln109">	//  Radeon 3430		- RV620</a>
<a name="ln110">	{0x95c2, 3, 0, RADEON_RV620, CHIP_STD, &quot;Radeon HD 3430&quot;},</a>
<a name="ln111">	{0x95c5, 3, 0, RADEON_RV620, CHIP_STD, &quot;Radeon HD 3450&quot;},</a>
<a name="ln112">	{0x95c6, 3, 0, RADEON_RV620, CHIP_STD, &quot;Radeon HD 3450&quot;},</a>
<a name="ln113">	{0x95c7, 3, 0, RADEON_RV620, CHIP_STD, &quot;Radeon HD 3450&quot;},</a>
<a name="ln114">	{0x95c9, 3, 0, RADEON_RV620, CHIP_STD, &quot;Radeon HD 3450&quot;},</a>
<a name="ln115">	{0x95c4, 3, 0, RADEON_RV620, CHIP_STD, &quot;Radeon HD 3470&quot;},</a>
<a name="ln116">	{0x95c0, 3, 0, RADEON_RV620, CHIP_STD, &quot;Radeon HD 3550&quot;},</a>
<a name="ln117">	{0x9581, 2, 0, RADEON_RV630, CHIP_STD, &quot;Radeon HD 3600&quot;},</a>
<a name="ln118">	{0x9583, 2, 0, RADEON_RV630, CHIP_STD, &quot;Radeon HD 3600&quot;},</a>
<a name="ln119">	{0x9598, 2, 0, RADEON_RV630, CHIP_STD, &quot;Radeon HD 3600&quot;},</a>
<a name="ln120">	{0x9591, 3, 0, RADEON_RV635, CHIP_STD, &quot;Radeon HD 3600&quot;},</a>
<a name="ln121">	{0x9589, 2, 0, RADEON_RV630, CHIP_STD, &quot;Radeon HD 3610&quot;},</a>
<a name="ln122">	//  Radeon 3650		- RV635</a>
<a name="ln123">	//  Radeon 3670		- RV635</a>
<a name="ln124">	{0x9507, 2, 0, RADEON_RV670, CHIP_STD, &quot;Radeon HD 3830&quot;},</a>
<a name="ln125">	{0x9505, 2, 0, RADEON_RV670, CHIP_STD, &quot;Radeon HD 3850&quot;},</a>
<a name="ln126">	{0x9513, 2, 0, RADEON_RV670, CHIP_STD, &quot;Radeon HD 3850 X2&quot;},</a>
<a name="ln127">	{0x9515, 2, 0, RADEON_RV670, CHIP_STD, &quot;Radeon HD 3850&quot;},</a>
<a name="ln128">	{0x9501, 2, 0, RADEON_RV670, CHIP_STD, &quot;Radeon HD 3870&quot;},</a>
<a name="ln129">	{0x950F, 2, 0, RADEON_RV670, CHIP_STD | CHIP_X2, &quot;Radeon HD 3870 X2&quot;},</a>
<a name="ln130">	{0x9710, 3, 0, RADEON_RV620, CHIP_IGP, &quot;Radeon HD 4200&quot;},</a>
<a name="ln131">	{0x9715, 3, 0, RADEON_RV620, CHIP_IGP, &quot;Radeon HD 4250&quot;},</a>
<a name="ln132">	{0x9712, 3, 0, RADEON_RV620, CHIP_IGP, &quot;Radeon HD 4270&quot;},</a>
<a name="ln133">	{0x9714, 3, 0, RADEON_RV620, CHIP_IGP, &quot;Radeon HD 4290&quot;},</a>
<a name="ln134"> </a>
<a name="ln135">	// Marketing Names: Radeon HD 4330 - HD 4890, HD 51xx, HD 5xxV</a>
<a name="ln136">	// Introduced: 2008</a>
<a name="ln137">	// Codename: Wekiva</a>
<a name="ln138">	// Process: 55 nm</a>
<a name="ln139">	//	Radeon 4330		- RV710</a>
<a name="ln140">	{0x954f, 3, 2, RADEON_RV710, CHIP_IGP, &quot;Radeon HD 4300&quot;},</a>
<a name="ln141">	{0x9552, 3, 2, RADEON_RV710, CHIP_IGP, &quot;Radeon HD 4300&quot;},</a>
<a name="ln142">	{0x9553, 3, 2, RADEON_RV710, CHIP_IGP, &quot;Radeon HD 4500&quot;},</a>
<a name="ln143">	{0x9555, 3, 2, RADEON_RV710, CHIP_STD, &quot;Radeon HD 4350&quot;},</a>
<a name="ln144">	{0x9540, 3, 2, RADEON_RV710, CHIP_STD, &quot;Radeon HD 4550&quot;},</a>
<a name="ln145">	{0x9452, 3, 2, RADEON_RV730, CHIP_STD, &quot;AMD FireStream 9250&quot;},</a>
<a name="ln146">	{0x9480, 3, 2, RADEON_RV730, CHIP_STD, &quot;Radeon HD 4650&quot;},</a>
<a name="ln147">	{0x9488, 3, 2, RADEON_RV730, CHIP_MOBILE, &quot;Radeon HD 4650&quot;},</a>
<a name="ln148">	{0x9498, 3, 2, RADEON_RV730, CHIP_STD, &quot;Radeon HD 4650&quot;},</a>
<a name="ln149">	{0x94b4, 3, 2, RADEON_RV740, CHIP_STD, &quot;Radeon HD 4700&quot;},</a>
<a name="ln150">	{0x9490, 3, 2, RADEON_RV730, CHIP_STD, &quot;Radeon HD 4710&quot;},</a>
<a name="ln151">	{0x94b3, 3, 2, RADEON_RV740, CHIP_STD, &quot;Radeon HD 4770&quot;},</a>
<a name="ln152">	{0x94b5, 3, 2, RADEON_RV740, CHIP_STD, &quot;Radeon HD 4770&quot;},</a>
<a name="ln153">	{0x9450, 3, 1, RADEON_RV770, CHIP_STD, &quot;AMD FireStream 9270&quot;},</a>
<a name="ln154">	{0x944a, 3, 1, RADEON_RV770, CHIP_MOBILE, &quot;Radeon HD 4850&quot;},</a>
<a name="ln155">	{0x944e, 3, 1, RADEON_RV770, CHIP_STD, &quot;Radeon HD 4810&quot;},</a>
<a name="ln156">	{0x944c, 3, 1, RADEON_RV770, CHIP_STD, &quot;Radeon HD 4830&quot;},</a>
<a name="ln157">	{0x9442, 3, 1, RADEON_RV770, CHIP_STD, &quot;Radeon HD 4850&quot;},</a>
<a name="ln158">	{0x9443, 3, 1, RADEON_RV770, CHIP_STD | CHIP_X2, &quot;Radeon HD 4850 X2&quot;},</a>
<a name="ln159">	{0x94a1, 3, 1, RADEON_RV770, CHIP_IGP, &quot;Radeon HD 4860&quot;},</a>
<a name="ln160">	{0x9440, 3, 1, RADEON_RV770, CHIP_STD, &quot;Radeon HD 4870&quot;},</a>
<a name="ln161">	{0x9441, 3, 1, RADEON_RV770, CHIP_STD | CHIP_X2, &quot;Radeon HD 4870 X2&quot;},</a>
<a name="ln162">	{0x9460, 3, 1, RADEON_RV770, CHIP_STD, &quot;Radeon HD 4890&quot;},</a>
<a name="ln163"> </a>
<a name="ln164">	// From here on AMD no longer used numeric identifiers</a>
<a name="ln165">	// Marketing names can collide for different generations of cards</a>
<a name="ln166">	// as such we should ignore them at all costs (besides the card name)</a>
<a name="ln167"> </a>
<a name="ln168">	// Introduced: 2009</a>
<a name="ln169">	// Codename: Evergreen</a>
<a name="ln170">	// Process: 40 nm</a>
<a name="ln171">	//  Cedar</a>
<a name="ln172">	{0x68e1, 4, 0, RADEON_CEDAR, CHIP_STD, &quot;Radeon HD 5430&quot;},</a>
<a name="ln173">	{0x68f9, 4, 0, RADEON_CEDAR, CHIP_STD, &quot;Radeon HD 5450&quot;},</a>
<a name="ln174">	{0x68e0, 4, 0, RADEON_CEDAR, CHIP_IGP, &quot;Radeon HD 5470&quot;},</a>
<a name="ln175">	{0x68e4, 4, 0, RADEON_CEDAR, CHIP_MOBILE, &quot;Radeon HD 6370&quot;},</a>
<a name="ln176">	//  Redwood</a>
<a name="ln177">	{0x68da, 4, 0, RADEON_REDWOOD, CHIP_STD, &quot;Radeon HD 5500&quot;},</a>
<a name="ln178">	{0x68d9, 4, 0, RADEON_REDWOOD, CHIP_STD, &quot;Radeon HD 5570&quot;},</a>
<a name="ln179">	{0x675f, 4, 0, RADEON_REDWOOD, CHIP_STD, &quot;Radeon HD 5570&quot;},</a>
<a name="ln180">	{0x68b9, 4, 0, RADEON_REDWOOD, CHIP_STD, &quot;Radeon HD 5600&quot;},</a>
<a name="ln181">	{0x68c1, 4, 0, RADEON_REDWOOD, CHIP_STD, &quot;Radeon HD 5650&quot;},</a>
<a name="ln182">	{0x68c8, 4, 0, RADEON_REDWOOD, CHIP_STD, &quot;FirePro V4800&quot;},</a>
<a name="ln183">	{0x68d8, 4, 0, RADEON_REDWOOD, CHIP_STD, &quot;Radeon HD 5670&quot;},</a>
<a name="ln184">	//  Juniper</a>
<a name="ln185">	{0x68be, 4, 0, RADEON_JUNIPER, CHIP_STD, &quot;Radeon HD 5700&quot;},</a>
<a name="ln186">	{0x68b8, 4, 0, RADEON_JUNIPER, CHIP_STD, &quot;Radeon HD 5770&quot;},</a>
<a name="ln187">	//  Juniper LE / XT (67X0 is rebranded 57X0 + tweaks)</a>
<a name="ln188">#if 0</a>
<a name="ln189">	// Not working: #8154</a>
<a name="ln190">	{0x68bf, 4, 0, RADEON_JUNIPER, CHIP_STD, &quot;Radeon HD 6750&quot;},</a>
<a name="ln191">#endif</a>
<a name="ln192">	{0x68ba, 4, 0, RADEON_JUNIPER, CHIP_STD, &quot;Radeon HD 6770&quot;},</a>
<a name="ln193">	//  Cypress</a>
<a name="ln194">	{0x689e, 4, 0, RADEON_CYPRESS, CHIP_STD, &quot;Radeon HD 5800&quot;},</a>
<a name="ln195">	{0x6899, 4, 0, RADEON_CYPRESS, CHIP_STD, &quot;Radeon HD 5850&quot;},</a>
<a name="ln196">	{0x6898, 4, 0, RADEON_CYPRESS, CHIP_STD, &quot;Radeon HD 5870&quot;},</a>
<a name="ln197">	//  Hemlock</a>
<a name="ln198">	{0x689c, 4, 0, RADEON_HEMLOCK, CHIP_STD | CHIP_X2, &quot;Radeon HD 5900 X2&quot;},</a>
<a name="ln199">	{0x689d, 4, 0, RADEON_HEMLOCK, CHIP_STD | CHIP_X2, &quot;Radeon HD 5900 X2&quot;},</a>
<a name="ln200">	// Fusion APUS</a>
<a name="ln201">	//  Palm</a>
<a name="ln202">	{0x9804, 4, 1, RADEON_PALM, CHIP_APU, &quot;Radeon HD 6250&quot;},</a>
<a name="ln203">	{0x9805, 4, 1, RADEON_PALM, CHIP_APU, &quot;Radeon HD 6290&quot;},</a>
<a name="ln204">	{0x9807, 4, 1, RADEON_PALM, CHIP_APU, &quot;Radeon HD 6290&quot;},</a>
<a name="ln205">	{0x9802, 4, 1, RADEON_PALM, CHIP_APU, &quot;Radeon HD 6310&quot;},</a>
<a name="ln206">	{0x9803, 4, 1, RADEON_PALM, CHIP_APU, &quot;Radeon HD 6310&quot;},</a>
<a name="ln207">	{0x9806, 4, 1, RADEON_PALM, CHIP_APU, &quot;Radeon HD 6320&quot;},</a>
<a name="ln208">	{0x9808, 4, 1, RADEON_PALM, CHIP_APU, &quot;Radeon HD 7340&quot;},</a>
<a name="ln209">	//  Sumo (no VGA / LVDS!, only DP)</a>
<a name="ln210">	{0x9640, 4, 1, RADEON_SUMO, CHIP_APU, &quot;Radeon HD 6550D&quot;},</a>
<a name="ln211">	{0x9641, 4, 1, RADEON_SUMO, CHIP_APU, &quot;Radeon HD Sumo&quot;},</a>
<a name="ln212">#if 0</a>
<a name="ln213">	// Not working: #10335, #12026</a>
<a name="ln214">	{0x9647, 4, 1, RADEON_SUMO, CHIP_APU, &quot;Radeon HD 6520G&quot;},</a>
<a name="ln215">	{0x9648, 4, 1, RADEON_SUMO, CHIP_APU, &quot;Radeon HD 6480G&quot;},</a>
<a name="ln216">#endif</a>
<a name="ln217">	{0x964a, 4, 1, RADEON_SUMO, CHIP_APU, &quot;Radeon HD 6530D&quot;},</a>
<a name="ln218">	{0x964e, 4, 1, RADEON_SUMO, CHIP_APU, &quot;Radeon HD Sumo&quot;},</a>
<a name="ln219">	{0x964f, 4, 1, RADEON_SUMO, CHIP_APU, &quot;Radeon HD Sumo&quot;},</a>
<a name="ln220">	//  Sumo2 (no VGA / LVDS!, only DP)</a>
<a name="ln221">	{0x9642, 4, 1, RADEON_SUMO2, CHIP_APU, &quot;Radeon HD 6370D&quot;},</a>
<a name="ln222">	{0x9643, 4, 1, RADEON_SUMO2, CHIP_APU, &quot;Radeon HD Sumo2&quot;},</a>
<a name="ln223">	{0x9644, 4, 1, RADEON_SUMO2, CHIP_APU, &quot;Radeon HD 6410D&quot;},</a>
<a name="ln224">	{0x9645, 4, 1, RADEON_SUMO2, CHIP_APU, &quot;Radeon HD Sumo2&quot;},</a>
<a name="ln225"> </a>
<a name="ln226">	// Introduced: 2010</a>
<a name="ln227">	// Codename: Nothern Islands</a>
<a name="ln228">	// Process: 40 nm</a>
<a name="ln229">	//  Caicos</a>
<a name="ln230">#if 0</a>
<a name="ln231">	// Not working: #12313</a>
<a name="ln232">	{0x6760, 5, 0, RADEON_CAICOS, CHIP_MOBILE, &quot;Radeon HD 6470&quot;},</a>
<a name="ln233">#endif</a>
<a name="ln234">	{0x6761, 5, 0, RADEON_CAICOS, CHIP_MOBILE, &quot;Radeon HD 6430&quot;},</a>
<a name="ln235">	{0x6762, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD Caicos&quot;},</a>
<a name="ln236">	{0x6763, 5, 0, RADEON_CAICOS, CHIP_DISCREET, &quot;Radeon HD E6460&quot;},</a>
<a name="ln237">	{0x6764, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD Caicos&quot;},</a>
<a name="ln238">	{0x6765, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD Caicos&quot;},</a>
<a name="ln239">	{0x6766, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD Caicos&quot;},</a>
<a name="ln240">	{0x6767, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD Caicos&quot;},</a>
<a name="ln241">	{0x6768, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD Caicos&quot;},</a>
<a name="ln242">	{0x6770, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD 6400&quot;},</a>
<a name="ln243">	{0x6778, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD 7470/8470&quot;},</a>
<a name="ln244">	{0x6779, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD 6450/7450/8450&quot;},</a>
<a name="ln245">	{0x68fa, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD 7350&quot;},</a>
<a name="ln246">	{0x677b, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD 7400&quot;},</a>
<a name="ln247">	{0x6772, 5, 0, RADEON_CAICOS, CHIP_APU, &quot;Radeon HD 7400A&quot;},</a>
<a name="ln248">	{0x6771, 5, 0, RADEON_CAICOS, CHIP_STD, &quot;Radeon HD 8490&quot;},</a>
<a name="ln249">	//  Turks</a>
<a name="ln250">	{0x6740, 5, 0, RADEON_TURKS, CHIP_MOBILE, &quot;Radeon HD 6770M&quot;},</a>
<a name="ln251">	{0x6741, 5, 0, RADEON_TURKS, CHIP_MOBILE, &quot;Radeon HD 6650M&quot;},</a>
<a name="ln252">	{0x6742, 5, 0, RADEON_TURKS, CHIP_MOBILE, &quot;Radeon HD 6625M&quot;},</a>
<a name="ln253">	{0x6743, 5, 0, RADEON_TURKS, CHIP_DISCREET, &quot;Radeon HD E6760&quot;},</a>
<a name="ln254">	{0x6744, 5, 0, RADEON_TURKS, CHIP_MOBILE, &quot;Radeon HD Turks&quot;},</a>
<a name="ln255">	{0x6745, 5, 0, RADEON_TURKS, CHIP_MOBILE, &quot;Radeon HD Turks&quot;},</a>
<a name="ln256">	{0x6746, 5, 0, RADEON_TURKS, CHIP_STD, &quot;FirePro V???? (turks)&quot;},</a>
<a name="ln257">	{0x6747, 5, 0, RADEON_TURKS, CHIP_STD, &quot;FirePro V???? (turks)&quot;},</a>
<a name="ln258">	{0x6748, 5, 0, RADEON_TURKS, CHIP_STD, &quot;FirePro V???? (turks)&quot;},</a>
<a name="ln259">	{0x6749, 5, 0, RADEON_TURKS, CHIP_STD, &quot;FirePro V4900&quot;},</a>
<a name="ln260">	{0x6750, 5, 0, RADEON_TURKS, CHIP_STD, &quot;Radeon HD 6500&quot;},</a>
<a name="ln261">	{0x6758, 5, 0, RADEON_TURKS, CHIP_STD, &quot;Radeon HD 6670&quot;},</a>
<a name="ln262">	{0x6759, 5, 0, RADEON_TURKS, CHIP_STD, &quot;Radeon HD 6570/7570&quot;},</a>
<a name="ln263">	{0x675d, 5, 0, RADEON_TURKS, CHIP_STD, &quot;Radeon HD 7570&quot;},</a>
<a name="ln264">	{0x6850, 6, 0, RADEON_TURKS, CHIP_MOBILE, &quot;Radeon HD 7570&quot;},</a>
<a name="ln265">#if 0</a>
<a name="ln266">	// Not working: #12026</a>
<a name="ln267">	{0x6840, 6, 0, RADEON_TURKS, CHIP_MOBILE, &quot;Radeon HD 7670&quot;},</a>
<a name="ln268">#endif</a>
<a name="ln269">	//  Barts</a>
<a name="ln270">	{0x673e, 5, 0, RADEON_BARTS, CHIP_STD, &quot;Radeon HD 6790&quot;},</a>
<a name="ln271">#if 0</a>
<a name="ln272">	// Not working: #8765</a>
<a name="ln273">	{0x6739, 5, 0, RADEON_BARTS, CHIP_STD, &quot;Radeon HD 6850&quot;},</a>
<a name="ln274">#endif</a>
<a name="ln275">	{0x6738, 5, 0, RADEON_BARTS, CHIP_STD, &quot;Radeon HD 6870&quot;},</a>
<a name="ln276">	//  Cayman</a>
<a name="ln277">	{0x6700, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD Cayman&quot;},</a>
<a name="ln278">	{0x6701, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD Cayman&quot;},</a>
<a name="ln279">	{0x6702, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD Cayman&quot;},</a>
<a name="ln280">	{0x6703, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD Cayman&quot;},</a>
<a name="ln281">	{0x6704, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;FirePro V7900&quot;},</a>
<a name="ln282">	{0x6705, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD Cayman&quot;},</a>
<a name="ln283">	{0x6706, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;FirePro V???? (cayman)&quot;},</a>
<a name="ln284">	{0x6707, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD Cayman&quot;},</a>
<a name="ln285">	{0x6708, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD Cayman&quot;},</a>
<a name="ln286">	{0x6709, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD Cayman&quot;},</a>
<a name="ln287">	{0x6718, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD 6970&quot;},</a>
<a name="ln288">	{0x6719, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD 6950&quot;},</a>
<a name="ln289">	{0x671c, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD Cayman&quot;},</a>
<a name="ln290">	{0x671f, 5, 0, RADEON_CAYMAN, CHIP_STD, &quot;Radeon HD 6900&quot;},</a>
<a name="ln291">	//  Antilles (Top, Dual GPU)</a>
<a name="ln292">	{0x671d, 5, 0, RADEON_ANTILLES, CHIP_STD, &quot;Radeon HD 6990&quot;},</a>
<a name="ln293"> </a>
<a name="ln294"> </a>
<a name="ln295">	// Introduced: Late 2011</a>
<a name="ln296">	// Codename: Southern Islands</a>
<a name="ln297">	// Process: 28 nm</a>
<a name="ln298">	//  Cape Verde</a>
<a name="ln299">	{0x6820, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln300">	{0x6821, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln301">	{0x6823, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln302">	{0x6824, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln303">	{0x6825, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln304">	{0x6826, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln305">	{0x6827, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln306">	{0x6828, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln307">	{0x6829, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln308">	{0x682a, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln309">	{0x682b, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln310">	{0x682c, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;FirePro W4100&quot;},</a>
<a name="ln311">	{0x682d, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln312">	{0x682f, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln313">	{0x6830, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln314">	{0x6831, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln315">	{0x6835, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon R7 Series&quot;},</a>
<a name="ln316">	{0x6837, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln317">	{0x6838, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln318">	{0x6839, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln319">	{0x683b, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD Verde&quot;},</a>
<a name="ln320">	{0x683d, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD 7770&quot;},</a>
<a name="ln321">	{0x683f, 6, 0, RADEON_CAPEVERDE, CHIP_STD, &quot;Radeon HD 7750&quot;},</a>
<a name="ln322">	//  Pitcairn</a>
<a name="ln323">	{0x6800, 6, 0, RADEON_PITCAIRN, CHIP_MOBILE, &quot;Radeon HD 7970&quot;},</a>
<a name="ln324">	{0x6801, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD Pitcairn&quot;},</a>
<a name="ln325">	{0x6802, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD Pitcairn&quot;},</a>
<a name="ln326">	{0x6806, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD Pitcairn&quot;},</a>
<a name="ln327">	{0x6808, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD Pitcairn&quot;},</a>
<a name="ln328">	{0x6809, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD Pitcairn&quot;},</a>
<a name="ln329">	{0x6810, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD R9 270X&quot;},</a>
<a name="ln330">	{0x6811, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD R9 270&quot;},</a>
<a name="ln331">	{0x6816, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD Pitcairn&quot;},</a>
<a name="ln332">	{0x6817, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD Pitcairn&quot;},</a>
<a name="ln333">	{0x6818, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD 7870&quot;},</a>
<a name="ln334">	{0x6819, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD 7800&quot;},</a>
<a name="ln335">	{0x684c, 6, 0, RADEON_PITCAIRN, CHIP_STD, &quot;Radeon HD Pitcairn&quot;},</a>
<a name="ln336">	//  Tahiti</a>
<a name="ln337">	{0x6780, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD Tahiti&quot;},</a>
<a name="ln338">	{0x6784, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD Tahiti&quot;},</a>
<a name="ln339">	{0x6788, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD Tahiti&quot;},</a>
<a name="ln340">	{0x678a, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD Tahiti&quot;},</a>
<a name="ln341">	{0x6790, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD Tahiti&quot;},</a>
<a name="ln342">	{0x679e, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD Tahiti&quot;},</a>
<a name="ln343">	{0x679f, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD Tahiti&quot;},</a>
<a name="ln344">	{0x679a, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD 7950&quot;},</a>
<a name="ln345">	{0x6798, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD 7970&quot;},</a>
<a name="ln346">	{0x6799, 6, 0, RADEON_TAHITI, CHIP_STD, &quot;Radeon HD 7990&quot;},</a>
<a name="ln347">	//  Aruba   DCE 6.1 Trinity / Richland</a>
<a name="ln348">	{0x9900, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7660&quot;},</a>
<a name="ln349">	{0x9901, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7660&quot;},</a>
<a name="ln350">	{0x9903, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7640&quot;},</a>
<a name="ln351">	{0x9904, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7560&quot;},</a>
<a name="ln352">	{0x9905, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;FirePro A300&quot;},</a>
<a name="ln353">	{0x9906, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;FirePro A300&quot;},</a>
<a name="ln354">	{0x9907, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7560&quot;},</a>
<a name="ln355">	{0x9908, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7620&quot;},</a>
<a name="ln356">	{0x9909, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7500&quot;},</a>
<a name="ln357">	{0x990a, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7500&quot;},</a>
<a name="ln358">	{0x990b, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8650&quot;},</a>
<a name="ln359">	{0x990d, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8550&quot;},</a>
<a name="ln360">	{0x990f, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8610&quot;},</a>
<a name="ln361">	{0x9910, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7660&quot;},</a>
<a name="ln362">	{0x9913, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7640&quot;},</a>
<a name="ln363">	{0x9917, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7620&quot;},</a>
<a name="ln364">	{0x9918, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7600&quot;},</a>
<a name="ln365">	{0x9919, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7500&quot;},</a>
<a name="ln366">	{0x9990, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7920&quot;},</a>
<a name="ln367">	{0x9991, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7540&quot;},</a>
<a name="ln368">	{0x9992, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7420&quot;},</a>
<a name="ln369">#if 0</a>
<a name="ln370">	// Known not to work: https://dev.haiku-os.org/ticket/10606</a>
<a name="ln371">	{0x9993, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7480&quot;},</a>
<a name="ln372">#endif</a>
<a name="ln373">	{0x9994, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7400&quot;},</a>
<a name="ln374">	{0x9995, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8450&quot;},</a>
<a name="ln375">	{0x9996, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8470&quot;},</a>
<a name="ln376">	{0x9997, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8350&quot;},</a>
<a name="ln377">#if 0</a>
<a name="ln378">	// Known not to work: reported by ttcoder &amp; Dane</a>
<a name="ln379">	{0x9998, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8730&quot;},</a>
<a name="ln380">#endif</a>
<a name="ln381">	{0x999a, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8410&quot;},</a>
<a name="ln382">	{0x999b, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8310&quot;},</a>
<a name="ln383">	{0x999c, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8650&quot;},</a>
<a name="ln384">	{0x999d, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 8550&quot;},</a>
<a name="ln385">#if 0</a>
<a name="ln386">	// Not working: #12026</a>
<a name="ln387">	{0x99a0, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7520&quot;},</a>
<a name="ln388">#endif</a>
<a name="ln389">	{0x99a2, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7420&quot;},</a>
<a name="ln390">	{0x99a4, 6, 1, RADEON_ARUBA, CHIP_APU, &quot;Radeon HD 7400&quot;},</a>
<a name="ln391">	//  Oland   DCE 6,4</a>
<a name="ln392">	{0x990c, 6, 4, RADEON_OLAND, CHIP_STD, &quot;Radeon HD 8670&quot;},</a>
<a name="ln393">	{0x990e, 6, 4, RADEON_OLAND, CHIP_STD, &quot;Radeon HD 8570&quot;},</a>
<a name="ln394">	{0x6600, 6, 4, RADEON_OLAND, CHIP_MOBILE, &quot;Radeon HD 8750M&quot;},</a>
<a name="ln395">	{0x6601, 6, 4, RADEON_OLAND, CHIP_MOBILE, &quot;Radeon HD 8730M&quot;},</a>
<a name="ln396">	{0x6602, 6, 4, RADEON_OLAND, CHIP_MOBILE, &quot;Radeon HD Oland&quot;},</a>
<a name="ln397">	{0x6603, 6, 4, RADEON_OLAND, CHIP_MOBILE, &quot;Radeon HD Oland&quot;},</a>
<a name="ln398">	{0x6604, 6, 4, RADEON_OLAND, CHIP_MOBILE, &quot;Radeon R7 M270&quot;},</a>
<a name="ln399">	{0x6605, 6, 4, RADEON_OLAND, CHIP_MOBILE, &quot;Radeon R7 M260&quot;},</a>
<a name="ln400">	{0x6606, 6, 4, RADEON_OLAND, CHIP_MOBILE, &quot;Radeon HD 8790&quot;},</a>
<a name="ln401">	{0x6607, 6, 4, RADEON_OLAND, CHIP_MOBILE, &quot;Radeon HD 8350&quot;},</a>
<a name="ln402">	{0x6608, 6, 4, RADEON_OLAND, CHIP_STD, &quot;FirePro W2100&quot;},</a>
<a name="ln403">	{0x6610, 6, 4, RADEON_OLAND, CHIP_STD, &quot;Radeon R7 250&quot;},</a>
<a name="ln404">	{0x6611, 6, 4, RADEON_OLAND, CHIP_STD, &quot;Radeon R7 200&quot;},</a>
<a name="ln405">	{0x6613, 6, 4, RADEON_OLAND, CHIP_STD, &quot;Radeon R7 240&quot;},</a>
<a name="ln406">	{0x6620, 6, 4, RADEON_OLAND, CHIP_STD, &quot;Radeon R7 240&quot;},</a>
<a name="ln407">	{0x6621, 6, 4, RADEON_OLAND, CHIP_STD, &quot;Radeon HD Oland&quot;},</a>
<a name="ln408">	{0x6623, 6, 4, RADEON_OLAND, CHIP_STD, &quot;Radeon HD Oland&quot;},</a>
<a name="ln409">	{0x6631, 6, 4, RADEON_OLAND, CHIP_STD, &quot;Radeon HD Oland&quot;},</a>
<a name="ln410">	//  Hainan  NODCE. No display hardware, OpenCL 3D engine.</a>
<a name="ln411">	//{0x6670, 0, 0, RADEON_HAINAN, CHIP_COM, &quot;Radeon HD Hainan compute&quot;},</a>
<a name="ln412"> </a>
<a name="ln413">	// Introduced: Late 2013</a>
<a name="ln414">	// Codename: Sea Islands</a>
<a name="ln415">	// Process: 28 nm</a>
<a name="ln416">	//  Kaveri DCE 8.1</a>
<a name="ln417">	{0x1304, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln418">	{0x1305, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln419">	{0x1306, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln420">	{0x1307, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln421">	{0x1308, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln422">	{0x1309, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R7 Series&quot;},</a>
<a name="ln423">	{0x130a, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R6 Series&quot;},</a>
<a name="ln424">	{0x130b, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R4 Series&quot;},</a>
<a name="ln425">	{0x130c, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R7 Series&quot;},</a>
<a name="ln426">	{0x130d, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R6 Series&quot;},</a>
<a name="ln427">	{0x130e, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R5 Series&quot;},</a>
<a name="ln428">	{0x130f, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R7 Series&quot;},</a>
<a name="ln429">	{0x1310, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln430">	{0x1311, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln431">	{0x1312, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln432">	{0x1313, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R7 Series&quot;},</a>
<a name="ln433">	{0x1314, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln434">	{0x1315, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R5 Series&quot;},</a>
<a name="ln435">	{0x1316, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R5 Series&quot;},</a>
<a name="ln436">	{0x1317, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon HD Kaveri&quot;},</a>
<a name="ln437">	{0x1318, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R5 Series&quot;},</a>
<a name="ln438">	{0x131b, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R5 Series&quot;},</a>
<a name="ln439">	{0x131c, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R7 Series&quot;},</a>
<a name="ln440">	{0x131d, 8, 1, RADEON_KAVERI, CHIP_STD, &quot;Radeon R6 Series&quot;},</a>
<a name="ln441">	//  Bonaire DCE 8.2</a>
<a name="ln442">	{0x6640, 8, 2, RADEON_BONAIRE, CHIP_MOBILE, &quot;Radeon R9 380&quot;},</a>
<a name="ln443">	{0x6641, 8, 2, RADEON_BONAIRE, CHIP_MOBILE, &quot;Radeon HD 8930M&quot;},</a>
<a name="ln444">	{0x6646, 8, 2, RADEON_BONAIRE, CHIP_MOBILE, &quot;Radeon R9 380&quot;},</a>
<a name="ln445">	{0x6647, 8, 2, RADEON_BONAIRE, CHIP_MOBILE, &quot;Radeon R9 380&quot;},</a>
<a name="ln446">	{0x6649, 8, 2, RADEON_BONAIRE, CHIP_STD, &quot;FirePro W5100&quot;},</a>
<a name="ln447">	{0x6650, 8, 2, RADEON_BONAIRE, CHIP_STD, &quot;Radeon HD Bonaire&quot;},</a>
<a name="ln448">	{0x6651, 8, 2, RADEON_BONAIRE, CHIP_STD, &quot;Radeon HD Bonaire&quot;},</a>
<a name="ln449">	{0x6658, 8, 2, RADEON_BONAIRE, CHIP_STD, &quot;Radeon R7 200&quot;},</a>
<a name="ln450">	{0x665c, 8, 2, RADEON_BONAIRE, CHIP_STD, &quot;Radeon HD 7790&quot;},</a>
<a name="ln451">	{0x665d, 8, 2, RADEON_BONAIRE, CHIP_STD, &quot;Radeon R7 200&quot;},</a>
<a name="ln452">	{0x665f, 8, 2, RADEON_BONAIRE, CHIP_STD, &quot;Radeon R7 300&quot;},</a>
<a name="ln453">	//  Kabini DCE 8.3</a>
<a name="ln454">#if 0</a>
<a name="ln455">	// Not working: #10939</a>
<a name="ln456">	{0x9830, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8400&quot;},</a>
<a name="ln457">	{0x9831, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8400&quot;},</a>
<a name="ln458">#endif</a>
<a name="ln459">	{0x9832, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8330&quot;},</a>
<a name="ln460">	{0x9833, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8330&quot;},</a>
<a name="ln461">	{0x9834, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8210&quot;},</a>
<a name="ln462">	{0x9835, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8210&quot;},</a>
<a name="ln463">	{0x9836, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8280&quot;},</a>
<a name="ln464">	{0x9837, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8280&quot;},</a>
<a name="ln465">	{0x9838, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8240&quot;},</a>
<a name="ln466">	{0x9839, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8180&quot;},</a>
<a name="ln467">	{0x983a, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD Kabini&quot;},</a>
<a name="ln468">	{0x983b, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD Kabini&quot;},</a>
<a name="ln469">	{0x983c, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD Kabini&quot;},</a>
<a name="ln470">	{0x983d, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD 8250&quot;},</a>
<a name="ln471">	{0x983e, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD Kabini&quot;},</a>
<a name="ln472">	{0x983f, 8, 3, RADEON_KABINI, CHIP_STD, &quot;Radeon HD Kabini&quot;},</a>
<a name="ln473">	//  Mullins DCE 8.3</a>
<a name="ln474">	{0x9850, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD R3&quot;},</a>
<a name="ln475">	{0x9851, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD R2&quot;},</a>
<a name="ln476">	{0x9852, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD R2&quot;},</a>
<a name="ln477">	{0x9853, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD R2&quot;},</a>
<a name="ln478">	{0x9854, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD R2&quot;},</a>
<a name="ln479">	{0x9855, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD R3&quot;},</a>
<a name="ln480">	{0x9856, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD R2&quot;},</a>
<a name="ln481">	{0x9857, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD R2&quot;},</a>
<a name="ln482">	{0x9858, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD Mullins&quot;},</a>
<a name="ln483">	{0x9859, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD Mullins&quot;},</a>
<a name="ln484">	{0x985a, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD Mullins&quot;},</a>
<a name="ln485">	{0x985b, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD Mullins&quot;},</a>
<a name="ln486">	{0x985c, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD Mullins&quot;},</a>
<a name="ln487">	{0x985d, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD Mullins&quot;},</a>
<a name="ln488">	{0x985e, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD Mullins&quot;},</a>
<a name="ln489">	{0x985f, 8, 3, RADEON_MULLINS, CHIP_STD, &quot;Radeon HD Mullins&quot;},</a>
<a name="ln490">	//  Hawaii DCE 8.5</a>
<a name="ln491">	{0x67a0, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln492">	{0x67a1, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln493">	{0x67a2, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln494">	{0x67a8, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln495">	{0x67a9, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln496">	{0x67aa, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln497">	{0x67b0, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln498">	{0x67b1, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln499">	{0x67b8, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln500">	{0x67b9, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln501">	{0x67ba, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln502">	{0x67be, 8, 5, RADEON_HAWAII, CHIP_STD, &quot;Radeon HD Hawaii&quot;},</a>
<a name="ln503"> </a>
<a name="ln504">	// Introduced: 2014</a>
<a name="ln505">	// Codename: Volcanic Islands</a>
<a name="ln506">	// Process: 28 nm</a>
<a name="ln507">	// Iceland (aka topaz) NO DCE</a>
<a name="ln508">	//{0x6900, 99, 0, RADEON_TOPAZ, CHIP_STD, &quot;Radeon HD Topaz&quot;},</a>
<a name="ln509">	//{0x6901, 99, 0, RADEON_TOPAZ, CHIP_STD, &quot;Radeon HD Topaz&quot;},</a>
<a name="ln510">	//{0x6902, 99, 0, RADEON_TOPAZ, CHIP_STD, &quot;Radeon HD Topaz&quot;},</a>
<a name="ln511">	//{0x6903, 99, 0, RADEON_TOPAZ, CHIP_STD, &quot;Radeon HD Topaz&quot;},</a>
<a name="ln512">	//{0x6907, 99, 0, RADEON_TOPAZ, CHIP_STD, &quot;Radeon HD Topaz&quot;},</a>
<a name="ln513">	// Tonga DCE 10.0</a>
<a name="ln514">	{0x6920, 10, 0, RADEON_TONGA, CHIP_STD, &quot;Radeon HD Tonga&quot;},</a>
<a name="ln515">	{0x6921, 10, 0, RADEON_TONGA, CHIP_STD, &quot;Radeon HD Tonga&quot;},</a>
<a name="ln516">	{0x6928, 10, 0, RADEON_TONGA, CHIP_STD, &quot;Radeon HD Tonga&quot;},</a>
<a name="ln517">	{0x6929, 10, 0, RADEON_TONGA, CHIP_STD, &quot;Radeon HD Tonga&quot;},</a>
<a name="ln518">	{0x692b, 10, 0, RADEON_TONGA, CHIP_STD, &quot;Radeon HD Tonga&quot;},</a>
<a name="ln519">	{0x692f, 10, 0, RADEON_TONGA, CHIP_STD, &quot;Radeon HD Tonga&quot;},</a>
<a name="ln520">	{0x6930, 10, 0, RADEON_TONGA, CHIP_STD, &quot;Radeon HD Tonga&quot;},</a>
<a name="ln521">	{0x6938, 10, 0, RADEON_TONGA, CHIP_STD, &quot;Radeon HD Tonga&quot;},</a>
<a name="ln522">	{0x6939, 10, 0, RADEON_TONGA, CHIP_STD, &quot;Radeon HD Tonga&quot;},</a>
<a name="ln523">	// Carrizo DCE 11.0</a>
<a name="ln524">	{0x9870, 11, 0, RADEON_CARRIZO, CHIP_APU, &quot;Radeon HD Carrizo&quot;},</a>
<a name="ln525">	{0x9874, 11, 0, RADEON_CARRIZO, CHIP_APU, &quot;Radeon HD Carrizo&quot;},</a>
<a name="ln526">	{0x9875, 11, 0, RADEON_CARRIZO, CHIP_APU, &quot;Radeon HD Carrizo&quot;},</a>
<a name="ln527">	{0x9876, 11, 0, RADEON_CARRIZO, CHIP_APU, &quot;Radeon HD Carrizo&quot;},</a>
<a name="ln528">	{0x9877, 11, 0, RADEON_CARRIZO, CHIP_APU, &quot;Radeon HD Carrizo&quot;},</a>
<a name="ln529"> </a>
<a name="ln530">	// Introduced: 2016</a>
<a name="ln531">	// Codename: Artic Islands / Polaris</a>
<a name="ln532">	// Process: 14 nm</a>
<a name="ln533">	{0x67ef, 12, 0, RADEON_POLARIS, CHIP_STD, &quot;Radeon RX 460&quot;},</a>
<a name="ln534">	{0x67df, 12, 0, RADEON_POLARIS, CHIP_STD, &quot;Radeon RX 470/480&quot;},</a>
<a name="ln535">	{0x67ff, 12, 0, RADEON_POLARIS, CHIP_STD, &quot;Radeon RX 560&quot;},</a>
<a name="ln536"> </a>
<a name="ln537">	// Introduced: 2017</a>
<a name="ln538">	// Codename: Vega</a>
<a name="ln539">	// Process: 14nm</a>
<a name="ln540">	{0x15dd, 13, 0, RADEON_VEGA, CHIP_STD, &quot;Radeon RX Vega Mobility&quot;},</a>
<a name="ln541">	{0x15ff, 13, 0, RADEON_VEGA, CHIP_STD, &quot;Radeon RX Vega Mobility&quot;},</a>
<a name="ln542">	{0x6861, 13, 0, RADEON_VEGA, CHIP_STD, &quot;Radeon PRO WX 9100&quot;},</a>
<a name="ln543">	{0x6863, 13, 0, RADEON_VEGA, CHIP_STD, &quot;Radeon Vega Frontier Edition&quot;},</a>
<a name="ln544">	{0x6867, 13, 0, RADEON_VEGA, CHIP_STD, &quot;Radeon RX Vega 56&quot;},</a>
<a name="ln545">	{0x687f, 13, 0, RADEON_VEGA, CHIP_STD, &quot;Radeon RX Vega 64&quot;},</a>
<a name="ln546">	{0x684c, 13, 0, RADEON_VEGA, CHIP_STD, &quot;Radeon RX Vega M GH&quot;},</a>
<a name="ln547">	{0x684e, 13, 0, RADEON_VEGA, CHIP_STD, &quot;Radeon RX Vega M GL&quot;}</a>
<a name="ln548">};</a>
<a name="ln549"> </a>
<a name="ln550"> </a>
<a name="ln551">int32 api_version = B_CUR_DRIVER_API_VERSION;</a>
<a name="ln552"> </a>
<a name="ln553"> </a>
<a name="ln554">char* gDeviceNames[MAX_CARDS + 1];</a>
<a name="ln555">radeon_info* gDeviceInfo[MAX_CARDS];</a>
<a name="ln556">pci_module_info* gPCI;</a>
<a name="ln557">mutex gLock;</a>
<a name="ln558"> </a>
<a name="ln559"> </a>
<a name="ln560">static status_t</a>
<a name="ln561">get_next_radeon_hd(int32* _cookie, pci_info &amp;info, uint32 &amp;type)</a>
<a name="ln562">{</a>
<a name="ln563">	int32 index = *_cookie;</a>
<a name="ln564"> </a>
<a name="ln565">	// find devices</a>
<a name="ln566"> </a>
<a name="ln567">	for (; gPCI-&gt;get_nth_pci_info(index, &amp;info) == B_OK; index++) {</a>
<a name="ln568">		// check vendor</a>
<a name="ln569">		if (info.vendor_id != VENDOR_ID_ATI</a>
<a name="ln570">			|| info.class_base != PCI_display</a>
<a name="ln571">			|| info.class_sub != PCI_vga)</a>
<a name="ln572">			continue;</a>
<a name="ln573"> </a>
<a name="ln574">		// check device</a>
<a name="ln575">		for (uint32 i = 0; i &lt; sizeof(kSupportedDevices)</a>
<a name="ln576">				/ sizeof(kSupportedDevices[0]); i++) {</a>
<a name="ln577">			if (info.device_id == kSupportedDevices[i].pciID) {</a>
<a name="ln578">				type = i;</a>
<a name="ln579">				*_cookie = index + 1;</a>
<a name="ln580">				return B_OK;</a>
<a name="ln581">			}</a>
<a name="ln582">		}</a>
<a name="ln583">	}</a>
<a name="ln584"> </a>
<a name="ln585">	return B_ENTRY_NOT_FOUND;</a>
<a name="ln586">}</a>
<a name="ln587"> </a>
<a name="ln588"> </a>
<a name="ln589">extern &quot;C&quot; const char**</a>
<a name="ln590">publish_devices(void)</a>
<a name="ln591">{</a>
<a name="ln592">	TRACE(&quot;%s\n&quot;, __func__);</a>
<a name="ln593">	return (const char**)gDeviceNames;</a>
<a name="ln594">}</a>
<a name="ln595"> </a>
<a name="ln596"> </a>
<a name="ln597">extern &quot;C&quot; status_t</a>
<a name="ln598">init_hardware(void)</a>
<a name="ln599">{</a>
<a name="ln600">	TRACE(&quot;%s\n&quot;, __func__);</a>
<a name="ln601"> </a>
<a name="ln602">	status_t status = get_module(B_PCI_MODULE_NAME, (module_info**)&amp;gPCI);</a>
<a name="ln603">	if (status != B_OK) {</a>
<a name="ln604">		ERROR(&quot;%s: ERROR: pci module unavailable\n&quot;, __func__);</a>
<a name="ln605">		return status;</a>
<a name="ln606">	}</a>
<a name="ln607"> </a>
<a name="ln608">	int32 cookie = 0;</a>
<a name="ln609">	uint32 type;</a>
<a name="ln610">	pci_info info;</a>
<a name="ln611">	status = get_next_radeon_hd(&amp;cookie, info, type);</a>
<a name="ln612"> </a>
<a name="ln613">	put_module(B_PCI_MODULE_NAME);</a>
<a name="ln614">	return status;</a>
<a name="ln615">}</a>
<a name="ln616"> </a>
<a name="ln617"> </a>
<a name="ln618">extern &quot;C&quot; status_t</a>
<a name="ln619">init_driver(void)</a>
<a name="ln620">{</a>
<a name="ln621">	TRACE(&quot;%s\n&quot;, __func__);</a>
<a name="ln622"> </a>
<a name="ln623">	status_t status = get_module(B_PCI_MODULE_NAME, (module_info**)&amp;gPCI);</a>
<a name="ln624">	if (status != B_OK) {</a>
<a name="ln625">		ERROR(&quot;%s: ERROR: pci module unavailable\n&quot;, __func__);</a>
<a name="ln626">		return status;</a>
<a name="ln627">	}</a>
<a name="ln628"> </a>
<a name="ln629">	mutex_init(&amp;gLock, &quot;radeon hd ksync&quot;);</a>
<a name="ln630"> </a>
<a name="ln631">	// find devices</a>
<a name="ln632"> </a>
<a name="ln633">	int32 found = 0;</a>
<a name="ln634"> </a>
<a name="ln635">	for (int32 cookie = 0; found &lt; MAX_CARDS;) {</a>
<a name="ln636">		pci_info* info = (pci_info*)malloc(sizeof(pci_info));</a>
<a name="ln637">		if (info == NULL)</a>
<a name="ln638">			break;</a>
<a name="ln639"> </a>
<a name="ln640">		uint32 type;</a>
<a name="ln641">		status = get_next_radeon_hd(&amp;cookie, *info, type);</a>
<a name="ln642">		if (status &lt; B_OK) {</a>
<a name="ln643">			free(info);</a>
<a name="ln644">			break;</a>
<a name="ln645">		}</a>
<a name="ln646"> </a>
<a name="ln647">		// create device names &amp; allocate device info structure</a>
<a name="ln648"> </a>
<a name="ln649">		char name[64];</a>
<a name="ln650">		sprintf(name, &quot;graphics/radeon_hd_%02x%02x%02x&quot;,</a>
<a name="ln651">			info-&gt;bus, info-&gt;device,</a>
<a name="ln652">			info-&gt;function);</a>
<a name="ln653"> </a>
<a name="ln654">		gDeviceNames[found] = strdup(name);</a>
<a name="ln655">		if (gDeviceNames[found] == NULL)</a>
<a name="ln656">			break;</a>
<a name="ln657"> </a>
<a name="ln658">		gDeviceInfo[found] = (radeon_info*)malloc(sizeof(radeon_info));</a>
<a name="ln659">		if (gDeviceInfo[found] == NULL) {</a>
<a name="ln660">			free(gDeviceNames[found]);</a>
<a name="ln661">			break;</a>
<a name="ln662">		}</a>
<a name="ln663"> </a>
<a name="ln664">		// initialize the structure for later use</a>
<a name="ln665"> </a>
<a name="ln666">		memset(gDeviceInfo[found], 0, sizeof(radeon_info));</a>
<a name="ln667">		gDeviceInfo[found]-&gt;init_status = B_NO_INIT;</a>
<a name="ln668">		gDeviceInfo[found]-&gt;id = found;</a>
<a name="ln669">		gDeviceInfo[found]-&gt;pci = info;</a>
<a name="ln670">		gDeviceInfo[found]-&gt;registers = info-&gt;u.h0.base_registers[0];</a>
<a name="ln671">		gDeviceInfo[found]-&gt;pciID = kSupportedDevices[type].pciID;</a>
<a name="ln672">		gDeviceInfo[found]-&gt;deviceName = kSupportedDevices[type].deviceName;</a>
<a name="ln673">		gDeviceInfo[found]-&gt;chipsetID = kSupportedDevices[type].chipsetID;</a>
<a name="ln674">		gDeviceInfo[found]-&gt;dceMajor = kSupportedDevices[type].dceMajor;</a>
<a name="ln675">		gDeviceInfo[found]-&gt;dceMinor = kSupportedDevices[type].dceMinor;</a>
<a name="ln676">		gDeviceInfo[found]-&gt;chipsetFlags = kSupportedDevices[type].chipsetFlags;</a>
<a name="ln677"> </a>
<a name="ln678">		ERROR(&quot;%s: GPU(%ld) %s, revision = 0x%x\n&quot;, __func__, found,</a>
<a name="ln679">			kSupportedDevices[type].deviceName, info-&gt;revision);</a>
<a name="ln680"> </a>
<a name="ln681">		found++;</a>
<a name="ln682">	}</a>
<a name="ln683"> </a>
<a name="ln684">	gDeviceNames[found] = NULL;</a>
<a name="ln685"> </a>
<a name="ln686">	if (found == 0) {</a>
<a name="ln687">		mutex_destroy(&amp;gLock);</a>
<a name="ln688">		put_module(B_AGP_GART_MODULE_NAME);</a>
<a name="ln689">		put_module(B_PCI_MODULE_NAME);</a>
<a name="ln690">		ERROR(&quot;%s: no supported devices found\n&quot;, __func__);</a>
<a name="ln691">		return ENODEV;</a>
<a name="ln692">	}</a>
<a name="ln693"> </a>
<a name="ln694">	return B_OK;</a>
<a name="ln695">}</a>
<a name="ln696"> </a>
<a name="ln697"> </a>
<a name="ln698">extern &quot;C&quot; void</a>
<a name="ln699">uninit_driver(void)</a>
<a name="ln700">{</a>
<a name="ln701">	TRACE(&quot;%s\n&quot;, __func__);</a>
<a name="ln702"> </a>
<a name="ln703">	mutex_destroy(&amp;gLock);</a>
<a name="ln704"> </a>
<a name="ln705">	// free device related structures</a>
<a name="ln706">	char* name;</a>
<a name="ln707">	for (int32 index = 0; (name = gDeviceNames[index]) != NULL; index++) {</a>
<a name="ln708">		free(gDeviceInfo[index]);</a>
<a name="ln709">		free(name);</a>
<a name="ln710">	}</a>
<a name="ln711"> </a>
<a name="ln712">	put_module(B_PCI_MODULE_NAME);</a>
<a name="ln713">}</a>
<a name="ln714"> </a>
<a name="ln715"> </a>
<a name="ln716">extern &quot;C&quot; device_hooks*</a>
<a name="ln717">find_device(const char* name)</a>
<a name="ln718">{</a>
<a name="ln719">	int index;</a>
<a name="ln720"> </a>
<a name="ln721">	TRACE(&quot;%s\n&quot;, __func__);</a>
<a name="ln722"> </a>
<a name="ln723">	for (index = 0; gDeviceNames[index] != NULL; index++) {</a>
<a name="ln724">		if (!strcmp(name, gDeviceNames[index]))</a>
<a name="ln725">			return &amp;gDeviceHooks;</a>
<a name="ln726">	}</a>
<a name="ln727"> </a>
<a name="ln728">	ERROR(&quot;%s: %s wasn't found!\n&quot;, __func__, name);</a>
<a name="ln729">	return NULL;</a>
<a name="ln730">}</a>
<a name="ln731"> </a>

</code></pre>
<div class="balloon" rel="678"><p><span style="font-size:18px">&uarr;</span> <a href="https://www.viva64.com/en/w/v576/" target="_blank">V576</a> Incorrect format. Consider checking the third actual argument of the 'dprintf' function. The memsize type argument is expected.</p></div>

<link rel="stylesheet" href="highlight.css">
<script src="highlight.pack.js"></script>
<script src="highlightjs-line-numbers.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>hljs.initLineNumbersOnLoad();</script>
<script>
  $(document).ready(function() {
      $('.balloon').each(function () {
          var bl = $(this);
          var line = bl.attr('rel');
          var text = $('a[name="ln'+line+'"]').text();

          var space_count = 0;
          for(var i = 0; i<text.length; i++){
              var char = text[i];
              if((char !== ' ')&&(char !== '\t'))break;
              if(char === '\t')space_count++;
              space_count++;
          }

          bl.css('margin-left', space_count*8);
          $('a[name="ln'+line+'"]').after(bl);
      });

      window.location = window.location;
  });
</script>
</body>
</html>
